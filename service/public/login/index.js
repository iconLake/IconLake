var __awaiter=this&&this.__awaiter||function(e,c,r,d){return new(r=r||Promise)(function(i,t){function o(e){try{a(d.next(e))}catch(e){t(e)}}function n(e){try{a(d.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,n)}a((d=d.apply(e,c||[])).next())})};__awaiter(this,void 0,void 0,function*(){location.search&&URL&&(i=new URL(location.href).searchParams.get("referer"))&&(document.cookie=`referer=${i};path=/`);const e=yield fetch("/api/login/params").then(e=>e.json()),t=encodeURIComponent(location.origin);var i=document.querySelector(".auth .gitee"),i=(e.login.gitee?(i.classList.add("active"),i.addEventListener("click",()=>{location.href=`https://gitee.com/oauth/authorize?client_id=${e.clientId.gitee}&redirect_uri=${t}%2Fapi%2Foauth%2Fgitee&response_type=code`})):i.style.display="none",document.querySelector(".auth .github")),i=(e.login.github?(i.classList.add("active"),i.addEventListener("click",()=>{location.href=`https://github.com/login/oauth/authorize?client_id=${e.clientId.github}&redirect_uri=${t}%2Fapi%2Foauth%2Fgithub`})):i.style.display="none",document.querySelector(".auth .code"));e.login.code?(i.classList.add("active"),i.addEventListener("click",()=>{var e=prompt("请填写Code：");e&&(location.href="/api/oauth/code?id="+e)})):i.style.display="none"});