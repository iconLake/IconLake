import{D as g,a as y}from"./cache.05004cf3.js";import{e as I,s as k}from"./extension.dbd15d4c.js";import{d as z,m as i,n as v,p as b,o as D,c as f,q as d,f as F,k as p,_ as h}from"./index.c3ac6b9b.js";function w(a){var e,r;return((e=a.svg)==null?void 0:e.url)||((r=a.img)==null?void 0:r.url)}function L(a){var e,r;return{_id:"",groupId:"",tags:[],name:"",code:"",img:{url:((e=a.img)==null?void 0:e.url)||""},svg:{url:((r=a.svg)==null?void 0:r.url)||""}}}const x=["data-src","src"],C=z({__name:"Icon",props:{info:{},compress:{},lazy:{type:Boolean}},setup(a){const e=a,r=i(!1),o=i(""),c=i(),l=i(!1),_=s=>{I.onReady(async()=>{const t=await k.getFile({key:s.substring(g.length)}).catch(()=>({data:""}));o.value=t.data||"/imgs/img-error.svg"})};v(()=>e.info,async()=>{r.value=!1;const s=w(e.info);if(!s){o.value="/imgs/img-error.svg";return}if(s.startsWith(g)){_(s);return}if(e.compress){o.value=y(s,e.compress);return}o.value=s},{immediate:!0});const m=b(()=>e.info.svg&&e.info.svg.url?"svg":e.info.img&&e.info.img.url?"img":"unknown");return v(()=>r.value,()=>{r.value&&(o.value="/imgs/img-error.svg")}),D(()=>{const s=new IntersectionObserver(t=>{for(const u of t)if(u.isIntersecting){const n=u.target;n.dataset.src&&(n.src=n.dataset.src,l.value=!0),s.unobserve(n)}});c.value&&e.lazy&&s.observe(c.value)}),(s,t)=>(p(),f("div",{class:d(`icon type-${m.value}`)},[o.value?(p(),f("img",{key:0,ref_key:"imgDom",ref:c,class:d(`icon-${m.value}`),"data-src":o.value,src:s.lazy&&!l.value?void 0:o.value,loading:"lazy",onError:t[0]||(t[0]=u=>r.value=!0)},null,42,x)):F("",!0)],2))}});const P=h(C,[["__scopeId","data-v-dfe1fd79"]]);export{P as I,w as g,L as t};
