var P=Object.defineProperty;var D=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var B=(t,o,e)=>o in t?P(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,N=(t,o)=>{for(var e in o||(o={}))Y.call(o,e)&&B(t,e,o[e]);if(D)for(var e of D(o))G.call(o,e)&&B(t,e,o[e]);return t};import{d as V,h as $,x as y,z as J,o as m,j as S,m as s,t as f,l as a,B as j,C as T,H as x,I as K,p as F,A as Q,q as E,s as L,E as W,c as M,y as R,F as X,n as Z}from"./vendor.feadc916.js";import{e as ee,f as se,s as te,i as oe}from"./project.1b7086dc.js";import{T as ae,b as ne,t as q,c as le}from"./request.321932fc.js";import{_ as z}from"./plugin-vue_export-helper.5a098b48.js";import"./index.b9ae8af4.js";const ce=t=>(E("data-v-2f8afa88"),t=t(),L(),t),ie=["onSubmit"],re={class:"content"},ue={class:"flex"},de={class:"item short"},pe={class:"item short"},_e=ce(()=>s("option",{value:"1"},"iconfont",-1)),ve=[_e],fe={class:"item"},me={class:"t-center"},he=["disabled"],ye=["disabled"],Se=V({props:{projectId:null,info:null,deletable:{type:Boolean}},emits:["save","delete"],setup(t,{emit:o}){var d,i,h;const e=t,{t:n}=$();let l=y(((d=e.info)==null?void 0:d.name)||""),c=y(((i=e.info)==null?void 0:i.type)||ae.ICONFONT),u=y(((h=e.info)==null?void 0:h.resourceUrl)||""),b=J(()=>l.value&&c.value&&u.value);async function w(v){var k,C,U,g;const p=ne(u.value,c.value),r={projectId:e.projectId||"",_id:((k=e.info)==null?void 0:k._id)||"",name:l.value,type:c.value,resourceUrl:p.resourceUrl,syncUrl:p.syncUrl,prefix:((C=e.info)==null?void 0:C.prefix)||"",className:((U=e.info)==null?void 0:U.className)||""},{_id:H}=await ee(r);q.success(n("saveDone")),o("save",r),((g=v.submitter)==null?void 0:g.dataset.sync)&&_(H)}function I(){le(n("delSourceConfirm"),()=>{se(e.projectId,e.info._id).then(()=>{o("delete")})})}async function _(v){await te(e.projectId,v),q(n("syncDone"))}return(v,p)=>(m(),S("form",{onSubmit:Q(w,["prevent"])},[s("div",re,[s("div",ue,[s("div",de,[s("label",null,f(a(n)("name")),1),j(s("input",{type:"text",autofocus:"",class:"input","onUpdate:modelValue":p[0]||(p[0]=r=>x(l)?l.value=r:l=r)},null,512),[[T,a(l)]])]),s("div",pe,[s("label",null,f(a(n)("type")),1),j(s("select",{class:"input","onUpdate:modelValue":p[1]||(p[1]=r=>x(c)?c.value=r:c=r)},ve,512),[[K,a(c)]])])]),s("div",fe,[s("label",null,f(a(n)("onlineLink")),1),j(s("input",{type:"text",class:"input","onUpdate:modelValue":p[2]||(p[2]=r=>x(u)?u.value=r:u=r)},null,512),[[T,a(u)]])]),s("div",me,[t.deletable?(m(),S("button",{key:0,type:"button",class:"btn danger",onClick:I},f(a(n)("delete")),1)):F("",!0),s("button",{type:"submit",class:"btn",disabled:!a(b)},f(a(n)("save")),9,he),s("button",{type:"submit","data-sync":"true",class:"btn",disabled:!a(b)},f(a(n)("saveAndSync")),9,ye)])])],40,ie))}});var A=z(Se,[["__scopeId","data-v-2f8afa88"]]);const O=t=>(E("data-v-07ff193a"),t=t(),L(),t),be={class:"list"},we=O(()=>s("i",{class:"iconfont icon-plus"},null,-1)),Ie=["onClick"],je=O(()=>s("i",{class:"iconfont icon-angle"},null,-1)),xe=V({setup(t){const{t:o}=$(),n=W().params.id,l=y({isFormShow:!1}),c=y([]);async function u(){const _=await oe(n,"sources");c.value=_.sources.map(d=>N({isFormShow:!1},d)).reverse()}function b(_){c.value.splice(_,1)}function w(){l.value.isFormShow=!1,u()}function I(_,d){c.value[_].name=d.name}return u(),(_,d)=>(m(),S("div",be,[s("div",{class:R(["item add",{active:l.value.isFormShow}])},[s("div",{class:"header flex center c-main",onClick:d[0]||(d[0]=i=>l.value.isFormShow=!l.value.isFormShow)},[s("span",null,f(a(o)("addIconSource")),1),we]),l.value.isFormShow?(m(),M(A,{key:0,"project-id":a(n),onSave:w},null,8,["project-id"])):F("",!0)],2),(m(!0),S(X,null,Z(c.value,(i,h)=>(m(),S("div",{class:R(["item",{active:i.isFormShow}]),key:i._id},[s("div",{class:"header flex",onClick:v=>i.isFormShow=!i.isFormShow},[s("span",null,f(i.name),1),je],8,Ie),i.isFormShow?(m(),M(A,{key:0,"project-id":a(n),info:i,deletable:!0,onDelete:v=>b(h),onSave:v=>I(h,v)},null,8,["project-id","info","onDelete","onSave"])):F("",!0)],2))),128))]))}});var Be=z(xe,[["__scopeId","data-v-07ff193a"]]);export{Be as default};
