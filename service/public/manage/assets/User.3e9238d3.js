import{d as w,u as B,m as y,s as k,p as F,j as U,k as n,c as i,e,b as s,t as o,a as r,w as d,v as P,q as j,_ as z}from"./index.c3ac6b9b.js";import{t as T,u as E}from"./cache.05004cf3.js";import{u as V}from"./user.237cd0b6.js";const N={key:0,class:"avatar img"},I=["src","alt"],M={key:1,class:"avatar bg-main text flex center"},R={key:0},S={key:1,class:"iconfont icon-user"},$={class:"title"},q={class:"desc"},O=["alt"],G={class:"title"},H={class:"desc"},J=["alt"],K={class:"title"},Q={class:"desc"},W=["alt"],X=["href"],Y=w({__name:"User",setup(Z){const{t}=B(),{userInfo:a}=V(),_=y(k.get("locale")||"zh-cn"),g={"en-us":{label:"\u8BED\u8A00",value:"\u4E2D\u6587"},"zh-cn":{label:"Language",value:"English"}}[_.value],m=y(!1);let f;const b=F(()=>!!(a!=null&&a._id));function C(u){_.value=u,k.set("locale",u,{expires:100*360}),window.location.reload()}function A(){C(_.value==="en-us"?"zh-cn":"en-us")}function p(u){f&&clearTimeout(f),u?m.value=u:f=setTimeout(()=>{m.value=!1},100)}async function D(){p(!1),T(t("loggingOut")),await E.logout(),await E.clearCache(),v()}async function v(){location.href="/login"}return(u,l)=>{var h,x;const c=U("RouterLink");return n(),i("div",{class:"user",onMouseenter:l[0]||(l[0]=L=>p(!0)),onMouseleave:l[1]||(l[1]=L=>p(!1))},[e(a).avatar?(n(),i("div",N,[s("img",{src:e(a).avatar,alt:e(a).name},null,8,I)])):(n(),i("div",M,[e(a).name?(n(),i("span",R,o(e(a).name[0]),1)):(n(),i("i",S))])),s("div",{class:j(["pop",{active:m.value}])},[r(c,{class:"item flex",to:"/user/assets",alt:"\u6211\u5728\u8015\u8018\u7684\u9690\u5F62\u9EA6\u7530"},{default:d(()=>[s("div",null,[s("p",$,o(e(t)("myAssets")),1),s("p",q,o(e(t)("myAssetsDesc")),1)]),s("img",{src:"/imgs/grain.svg",alt:e(t)("myAssets")},null,8,O)]),_:1}),r(c,{class:"item flex",to:"/home",alt:"\u5DE5\u4F5C\u5BA4\u706F\u5149\u4E0B\u7684\u672A\u7720\u661F\u7403"},{default:d(()=>[s("div",null,[s("p",G,o(e(t)("myProjects")),1),s("p",H,o(e(t)("myProjectsDesc")),1)]),s("img",{src:"/imgs/island.svg",alt:e(t)("myProjects")},null,8,J)]),_:1}),r(c,{class:"item flex",to:"/user/tickets",alt:"\u5728\u8272\u5F69\u4E0E\u5149\u5F71\u4E2D\u6E38\u7267"},{default:d(()=>[s("div",null,[s("p",K,o(e(t)("myExhibitions")),1),s("p",Q,o(e(t)("myExhibitionsDesc")),1)]),s("img",{src:"/imgs/exhibition.svg",alt:e(t)("myExhibitions")},null,8,W)]),_:1}),r(c,{class:"item flex",to:"/user/setting/info"},{default:d(()=>[P(o(e(t)("mySettings")),1)]),_:1}),s("div",{class:"item flex",onClick:A},[s("span",null,o((h=e(g))==null?void 0:h.label),1),s("span",null,o((x=e(g))==null?void 0:x.value),1)]),s("a",{href:e(t)("feedbackUrl"),target:"_blank",class:"item flex"},[s("span",null,o(e(t)("feedback")),1),l[2]||(l[2]=s("i",{class:"iconfont icon-desc"},null,-1))],8,X),b.value?(n(),i("div",{key:0,class:"item flex",onClick:D},[s("span",null,o(e(t)("logout")),1),l[3]||(l[3]=s("i",{class:"iconfont icon-out"},null,-1))])):(n(),i("div",{key:1,class:"item flex",onClick:v},[s("span",null,o(e(t)("login")),1),l[4]||(l[4]=s("i",{class:"iconfont icon-in"},null,-1))]))],2)],32)}}});const os=z(Y,[["__scopeId","data-v-47187cf0"]]);export{os as U};
