import{d as D,p as A,m as d,n as I,c as i,b as t,F as w,h as z,f as m,B as F,C as T,q as k,H,k as r,t as N,_ as q}from"./index.c3ac6b9b.js";const E={class:"value"},L=["value"],M={class:"dropdown"},U=["onClick"],$={key:1,class:"add-form"},j=D({__name:"Select",props:{options:{},modelValue:{},addable:{type:Boolean},placeholder:{},size:{}},emits:["update:modelValue","change","add"],setup(y,{emit:h}){const n=y,v=h,x=A(()=>{const e=n.options.find(l=>l.value===n.modelValue);return e?e.label||e.value:n.placeholder||""}),a=d(!1),u=d(!1),o=d(""),p=d(),f=d();let c=!1;I(a,e=>{e||(c=!1,u.value=!1)});const C=e=>{const l=n.modelValue!==e.value;a.value=!1,v("update:modelValue",e.value),l&&v("change",e)},b=()=>{a.value=!0,c=!1},V=()=>{setTimeout(()=>{c||(a.value=!1),c=!1},20)},S=()=>{a.value=!0,u.value=!0,c=!0,H(()=>{f.value.focus()})},_=()=>{!o.value||(u.value=!1,v("add",o.value),o.value="",g())},g=()=>{!a.value&&p.value.focus()},B=()=>{a.value=!a.value,a.value&&p.value.focus()};return(e,l)=>(r(),i("div",{class:k(["select",{active:a.value,"size-default":e.size==="default"}])},[t("div",E,[t("input",{ref_key:"valueInputDom",ref:p,class:"text pointer flex start",value:x.value,type:"text",readonly:"",onFocus:b,onBlur:V},null,40,L),t("i",{class:"iconfont icon-back flex pointer",onClick:B})]),t("div",M,[(r(!0),i(w,null,z(n.options,s=>(r(),i("div",{key:s.value,class:"option pointer",onClick:G=>C(s)},N(s.label||s.value),9,U))),128)),e.addable&&!u.value?(r(),i("div",{key:0,class:"add pointer",onClick:S},l[1]||(l[1]=[t("i",{class:"iconfont icon-plus"},null,-1)]))):m("",!0),u.value?(r(),i("div",$,[F(t("input",{ref_key:"addInputDom",ref:f,"onUpdate:modelValue":l[0]||(l[0]=s=>o.value=s),type:"text",onSubmit:_},null,544),[[T,o.value]]),t("i",{class:k(["iconfont icon-checked flex pointer",{active:!!o.value}]),onClick:_},null,2)])):m("",!0)])],2))}});const K=q(j,[["__scopeId","data-v-5e61b55a"]]);export{K as S};
