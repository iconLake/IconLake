import{d as g,h as x,i as j,z as w,r as b,o as y,j as U,k as d,m as e,A as k,t as r,l as t,B as _,C as p,w as S,F as I,q as C,s as N,D}from"./vendor.feadc916.js";import{H as V}from"./Header.6270a960.js";import{c as B,e as R,s as P}from"./project.00d715c2.js";import{t as m,a as H,b as M}from"./request.69b3ed98.js";import{r as T}from"./index.e7a403bc.js";import{_ as $}from"./plugin-vue_export-helper.5a098b48.js";const q={iconfontResource:/^(https?:)?\/\/at\.alicdn\.com\/t\/.+\.(cs|j)s$/i};function A(a){return q.iconfontResource.test(a)}const i=a=>(C("data-v-59440aaa"),a=a(),N(),a),E={class:"main flex stretch"},F={class:"project bg-main grow flex center"},L=i(()=>e("div",{class:"slogan-left"},"Make",-1)),O=["onSubmit"],z={class:"item"},G={class:"input flex"},J=i(()=>e("i",{class:"iconfont icon-name"},null,-1)),K={class:"item"},Q={class:"input flex"},W=i(()=>e("i",{class:"iconfont icon-source"},null,-1)),X={class:"t-right"},Y=["disabled"],Z={class:"illus flex"},ee=i(()=>e("div",{class:"slogan-right"},"icon in control",-1)),se={class:"img"},te=["src"],oe=g({setup(a){const{t:o}=x(),s=j({_id:"",name:"",type:1,resourceUrl:""}),f=w(()=>s.name&&A(s.resourceUrl));async function h(){m(o("creatingProject"));const c=await B({name:s.name,sources:[H(s.resourceUrl)]});s._id=c._id,await v(),T.replace(`/icons/${c._id}`)}async function v(){const c=M(s.resourceUrl,s.type),n={projectId:s._id||"",_id:"",name:"\u521D\u59CB\u6E90",type:s.type,resourceUrl:c.resourceUrl,syncUrl:c.syncUrl,prefix:"",className:""},{_id:l}=await R(n);await P(s._id,l),m.success(o("creatingProjectDone"))}return(c,n)=>{const l=b("router-link");return y(),U(I,null,[d(V,{back:"/home",white:!0}),e("div",E,[e("div",F,[L,e("form",{onSubmit:k(h,["prevent"]),class:"fm"},[e("h1",null,r(t(o)("newProject")),1),e("h2",null,r(t(o)("fillProjectNameAndSource")),1),e("div",z,[e("label",null,r(t(o)("projectName")),1),e("div",G,[J,_(e("input",{class:"grow",autocomplete:"off",autofocus:"",maxlength:"15",type:"text",name:"name","onUpdate:modelValue":n[0]||(n[0]=u=>t(s).name=u)},null,512),[[p,t(s).name]])])]),e("div",K,[e("label",null,r(t(o)("iconSourceOfIconfont")),1),e("div",Q,[W,_(e("input",{class:"grow",autocomplete:"off",maxlength:"100",type:"text",name:"resourceUrl","onUpdate:modelValue":n[1]||(n[1]=u=>t(s).resourceUrl=u)},null,512),[[p,t(s).resourceUrl]])]),e("p",X,[d(l,{to:"/help",class:"link"},{default:S(()=>[D(r(t(o)("howToGetOnlineLink")),1)]),_:1})])]),e("button",{class:"bg-danger",type:"submit",disabled:!t(f)},r(t(o)("createNow")),9,Y)],40,O)]),e("div",Z,[ee,e("div",se,[e("img",{src:"/imgs/illus-2.png",alt:"iconLake"},null,8,te)])])])],64)}}});var ue=$(oe,[["__scopeId","data-v-59440aaa"]]);export{ue as default};
