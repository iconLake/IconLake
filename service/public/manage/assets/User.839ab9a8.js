import{d as E,u as U,n as m,q as g,r as L,o as p,c as f,b as e,t as n,e as l,s as q,p as z,j as B}from"./index.44bd5203.js";import{q as x}from"./project.10559182.js";import{_ as C}from"./_plugin-vue_export-helper.cdc0426e.js";const b="/api/user/";let t;async function D(a){return t&&!a||(t=await x({url:"/info",baseURL:b}),typeof t.tokenExpire=="string"&&(t.tokenExpire=new Date(t.tokenExpire))),t}function S(){return x({url:"/logout",baseURL:b})}const T=a=>(z("data-v-495be4c0"),a=a(),B(),a),j={key:0,class:"avatar img"},M=["src","alt"],P={key:1,class:"avatar bg-main text flex center"},V={href:"https://support.qq.com/product/370032",target:"_blank",class:"item flex"},$=T(()=>e("i",{class:"iconfont icon-out"},null,-1)),A=E({__name:"User",setup(a){const{t:_}=U();let c=m(g.get("locale")||"zh-cn");const d={"en-us":{label:"\u8BED\u8A00",value:"\u4E2D\u6587"},"zh-cn":{label:"Language",value:"English"}}[c.value];let u=m(!1),r=0;const s=L({});async function h(){Object.assign(s,await D())}h();function k(o){c.value=o,g.set("locale",o,{expires:100*360}),window.location.reload()}function y(){k(c.value==="en-us"?"zh-cn":"en-us")}function v(o){r&&clearTimeout(r),o?u.value=o:r=setTimeout(()=>{u.value=!1},100)}async function w(){await S(),location.href="/login"}return(o,i)=>(p(),f("div",{class:"user",onMouseenter:i[0]||(i[0]=I=>v(!0)),onMouseleave:i[1]||(i[1]=I=>v(!1))},[s.avatar?(p(),f("div",j,[e("img",{src:s.avatar,alt:s.name},null,8,M)])):(p(),f("div",P,[e("span",null,n(s.name?s.name[0]:"U"),1)])),e("div",{class:q(["pop",{active:l(u)}])},[e("div",{class:"item flex",onClick:y},[e("span",null,n(l(d).label),1),e("span",null,n(l(d).value),1)]),e("a",V,n(l(_)("feedback")),1),e("div",{class:"item flex",onClick:w},[e("span",null,n(l(_)("logout")),1),$])],2)],32))}});const F=C(A,[["__scopeId","data-v-495be4c0"]]);export{F as U};
