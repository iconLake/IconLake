import{d as D,h as V,C as E,i as B,y as u,M as F,o as r,j as d,k as C,l as s,w as H,m as t,x as m,n as y,t as c,F as J,q as N,s as W}from"./vendor.75eb7f42.js";import{i as L,w as j,t as x,f as O}from"./project.27995b36.js";import{H as q}from"./Header.c4625430.js";import{U as z}from"./User.72ccd448.js";import{_ as A}from"./plugin-vue_export-helper.5a098b48.js";import"./index.c317b062.js";const l=_=>(N("data-v-44eed8c6"),_=_(),W(),_),M={class:"name"},P={class:"tab flex"},R=l(()=>t("span",null,"CSS",-1)),G=["title"],K=l(()=>t("span",null,"Javascript",-1)),Q=["title"],X={key:0,class:"content use-css"},Y={class:"t-center"},Z=["title"],ee=l(()=>t("i",{class:"iconfont icon-copy"},null,-1)),se=["title"],te=l(()=>t("i",{class:"iconfont icon-copy"},null,-1)),ne={class:"t-center operate"},oe={key:1,class:"content use-js"},ie={class:"t-center"},ce=["title"],ae=l(()=>t("i",{class:"iconfont icon-copy"},null,-1)),le=["title"],re=l(()=>t("i",{class:"iconfont icon-copy"},null,-1)),de={class:"t-center operate"},pe={key:2,class:"content use-vue"},ue={class:"t-center"},_e=["title"],ve=l(()=>t("i",{class:"iconfont icon-copy"},null,-1)),fe=D({setup(_){const{t:i}=V(),$=E(),e=B({_id:$.params.id,name:"",class:"",prefix:"",iconUpdateTime:"",file:{},activeTab:"css",src:"",generating:new Set}),g=u(()=>`<link rel="stylesheet" href="${e.src}">`),h=u(()=>`<i class="${e.class} ${e.prefix}home"></i>`),b=u(()=>`<script src="${e.src}"><\/script>`),k='<icon-svg name="home"></icon-svg>',w=u(()=>{var n,o;return!((n=e.file.css)==null?void 0:n.updateTime)||+new Date((o=e.file.css)==null?void 0:o.updateTime)<+new Date(e.iconUpdateTime)}),S=u(()=>{var n,o;return!((n=e.file.js)==null?void 0:n.updateTime)||+new Date((o=e.file.js)==null?void 0:o.updateTime)<+new Date(e.iconUpdateTime)});F(()=>{var o,a;const n=e.activeTab;if(n==="vue"){e.src=i("loading"),I();return}e.src=((o=e.file[n])==null?void 0:o.hash)?`${e.file.domain}/src/${e._id}/${(a=e.file[n])==null?void 0:a.hash}/iconlake.${n}`:""});async function U(){const n=await L(e._id,"name file iconUpdateTime class prefix");Object.assign(e,n)}U();function v(n){return e.activeTab===n?"active":""}function f(n){e.activeTab=n}async function T(){const n=e.activeTab;if(n==="vue"||e.generating.has(n))return;e.generating.add(n),e.file[n]||(e.file[n]={updateTime:"",hash:""});const o=await j(e._id,n).finally(()=>{e.generating.delete(n)});Object.assign(e.file[n],o),x(i("generateDone"))}async function I(){e.src=(await j(e._id,"vue")).content||""}function p(n){O(n),x(i("copyDone"))}return(n,o)=>(r(),d(J,null,[C(q,{back:`/icons/${s(e)._id}`},{default:H(()=>[t("div",M,c(s(e).name),1)]),_:1},8,["back"]),C(z),t("div",P,[t("div",{class:m(["item",v("css")]),onClick:o[0]||(o[0]=a=>f("css"))},[R,s(w)?(r(),d("span",{key:0,class:"alert",title:s(i)("upgradable")},null,8,G)):y("",!0)],2),t("div",{class:m(["item",v("js")]),onClick:o[1]||(o[1]=a=>f("js"))},[K,s(S)?(r(),d("span",{key:0,class:"alert",title:s(i)("upgradable")},null,8,Q)):y("",!0)],2),t("div",{class:m(["item",v("vue")]),onClick:o[2]||(o[2]=a=>f("vue"))},"Vue",2)]),s(e).activeTab==="css"?(r(),d("div",X,[t("h2",Y,c(s(i)("useWithType",{type:"CSS"})),1),t("p",null,c(s(i)("includeType",{type:"CSS"}))+c(s(i)("colon")),1),t("div",{class:"code flex",onClick:o[3]||(o[3]=a=>p(s(g))),title:s(i)("copy")},[t("span",null,c(s(g)),1),ee],8,Z),t("p",null,c(s(i)("displayIcon"))+c(s(i)("colon")),1),t("div",{class:"code flex",onClick:o[4]||(o[4]=a=>p(s(h))),title:s(i)("copy")},[t("span",null,c(s(h)),1),te],8,se),t("div",ne,[t("button",{class:"btn",onClick:T},c(s(i)(s(e).generating.has("css")?"generating":"regenerate")),1)])])):s(e).activeTab==="js"?(r(),d("div",oe,[t("h2",ie,c(s(i)("useWithType",{type:"Javascript"})),1),t("p",null,c(s(i)("includeType",{type:"Javascript"}))+c(s(i)("colon")),1),t("div",{class:"code flex",onClick:o[5]||(o[5]=a=>p(s(b))),title:s(i)("copy")},[t("span",null,c(s(b)),1),ae],8,ce),t("p",null,c(s(i)("displayIcon"))+c(s(i)("colon")),1),t("div",{class:"code flex",onClick:o[6]||(o[6]=a=>p(k)),title:s(i)("copy")},[t("span",null,c(k)),re],8,le),t("div",de,[t("button",{class:"btn",onClick:T},c(s(i)(s(e).generating.has("js")?"generating":"regenerate")),1)])])):s(e).activeTab==="vue"?(r(),d("div",pe,[t("h2",ue,c(s(i)("useWithType",{type:s(i)("vueComponent")})),1),t("p",null,c(s(i)("componentFile"))+c(s(i)("colon")),1),t("div",{class:"code vue flex",onClick:o[7]||(o[7]=a=>p(s(e).src)),title:s(i)("copy")},[t("pre",null,c(s(e).src),1),ve],8,_e)])):y("",!0)],64))}});var Te=A(fe,[["__scopeId","data-v-44eed8c6"]]);export{Te as default};
