import{B as c}from"./@iconlake/client.0b258216.js";import{c as i,q as r}from"./cache.05004cf3.js";import{s as l,S as f}from"./extension.dbd15d4c.js";const n="/api/project/",$={get list(){return i.project.enable({executor:s})},get info(){return i.project.enable({executor:m})},get getMembers(){return i.project.enable({executor:g})},get getIcon(){return i.project.enable({executor:T})},get getIconPages(){return i.project.enable({executor:h})},get getTickets(){return i.project.enable({executor:y})},get getTicket(){return i.project.enable({executor:O})},get getEmptyTickets(){return i.project.enable({executor:k})},editTicket:p,createEmptyTicket:I,deleteEmptyTicket:E,increaseTicketQuantity:j};function s(e){return r({url:"/list",params:{fields:e},baseURL:n})}function B(e){return r({method:"POST",url:"/info/edit",baseURL:n,data:e})}function v(e,t){return r({method:"POST",url:"/del",baseURL:n,data:{_id:e,name:t}})}function F(e,t){return r({method:"POST",url:"/clean",baseURL:n,data:{_id:e,name:t}})}function m(e,t){return r({url:`/info/${e}`,params:{fields:t},baseURL:n})}function _(e,t){return r({method:"POST",url:"/info/edit",baseURL:n,data:{_id:e,...t}})}function M(e,t){return r({method:"POST",url:"/group/edit",baseURL:n,data:{projectId:e,...t}})}function C(e,t){return r({method:"POST",url:"/group/del",baseURL:n,data:{projectId:e,_id:t}})}function L(e,t){return r({method:"POST",url:"/monitor/edit",baseURL:n,data:{_id:e,...t}})}function g(e){return r({method:"GET",url:"/member/list",baseURL:n,params:{_id:e}})}function q(e,t){return r({method:"POST",url:"/member/del",baseURL:n,data:{projectId:e,_id:t}})}function A(e){return r({method:"POST",url:"/invite/updateCode",baseURL:n,data:{_id:e}})}function p(e){return r({method:"POST",url:"/ticket/edit",baseURL:n,data:e})}function Q(e,t){return r({method:"POST",url:"/invite/accept",baseURL:n,data:{_id:e,code:t}})}function T(e,t){return r({method:"GET",url:"/icon/info",baseURL:n,params:{projectId:e,_id:t}})}function R(e,t){return r({method:"POST",url:"/icon/add",baseURL:n,data:{projectId:e,icons:t}})}function U(e,t){return r({method:"POST",url:"/icon/del",baseURL:n,data:{projectId:e,_ids:t}})}function z(e,t,o){return r({method:"POST",url:"/icon/edit",baseURL:n,data:{projectId:e,_id:t,...o}})}function D(e,t,o){return r({method:"POST",url:"/icon/addTag",baseURL:n,data:{projectId:e,_id:t,tag:o}})}function N(e,t,o){return r({method:"POST",url:"/icon/delTag",baseURL:n,data:{projectId:e,_id:t,tag:o}})}function h(e,t){return r({method:"GET",url:"/icon/pages",baseURL:n,params:{projectId:e,_id:t}})}function H(e,t,o){return r({method:"POST",url:"/icon/batchGroup",baseURL:n,data:{projectId:e,_ids:t,groupId:o}})}function J(e,t){return r({method:"POST",url:"/icon/gen",baseURL:n,data:{projectId:e,type:t}})}function K(e,t,o,a){return r({method:"POST",url:"/icon/setExpire",baseURL:n,data:{projectId:e,fileId:t,fileType:o,expire:a}})}async function d(e){return r({method:"GET",url:"/file/storageInfo",baseURL:n,params:{projectId:e}})}async function S(e){var a;let t=e.data;t instanceof Blob?t=`data:${t.type};base64,${c.from(await t.arrayBuffer()).toString("base64")}`:t instanceof ArrayBuffer?t=`data:application/octet-stream;base64,${c.from(t).toString("base64")}`:t=`data:image/svg+xml;base64,${c.from(t).toString("base64")}`;const o=await l({method:f.SaveFiles,params:{files:[{key:`${e.dir||"icon"}/${e.projectId}/${e._id}`,data:t}]}});if(((a=o.files)==null?void 0:a.length)===0)throw new Error("upload file failed");return o.files[0]}async function b(e,t){const o=new FormData;let a=e.data;return a instanceof Blob?a=new File([await a.arrayBuffer()],e._id,{type:a.type}):a instanceof ArrayBuffer?a=new File([a],e._id,{type:"application/octet-stream"}):a=new File([e.data],e._id,{type:"image/svg+xml"}),o.append("file",a),o.append("key",`${e.dir||"icon"}/${e.projectId}/${e._id}`),await r({method:"POST",url:t.api,headers:{authorization:`Bearer ${t.token}`},data:o})}async function V(e,t){let o=t==null?void 0:t.storageType,a;o||(a=await d(e.projectId),a.custom?o="custom":a.free>0&&(o="iconlake"));let u;if(o==="iconlake")u=await r({method:"POST",url:"/file/upload",baseURL:n,headers:{"Content-Type":typeof e.data=="string"?"text/plain; charset=utf-8":"application/octet-stream"},params:{projectId:e.projectId,_id:e._id,dir:e.dir},data:e.data,timeout:1e3*60*3});else if(o==="custom"){if(a||(a=await d(e.projectId)),!a.custom)throw new Error("custom storage info not found");u=await b(e,a.custom)}else u=await S(e);return u}function W(e,t){return r({method:"POST",url:"/theme/edit",baseURL:n,data:{projectId:e,...t}})}var P=(e=>(e.Great="great",e.Good="good",e.Normal="normal",e.Bad="bad",e))(P||{});function X(e){return r({method:"GET",url:"/icon/appreciate/list",baseURL:"/api",params:e})}function y(e){return r({method:"GET",url:"/ticket/list",baseURL:n,params:e})}function O(e){return r({method:"GET",url:"/ticket/info",baseURL:n,params:e})}function k(e){return r({method:"GET",url:"/ticket/listEmpty",baseURL:n,params:e})}function I(e){return r({method:"POST",url:"/ticket/createEmpty",baseURL:n,data:e})}function E(e){return r({method:"POST",url:"/ticket/deleteEmpty",baseURL:n,data:e})}function j(e){return r({method:"POST",url:"/ticket/increaseQuantity",baseURL:n,data:e})}export{P as A,M as a,A as b,B as c,C as d,_ as e,q as f,W as g,L as h,v as i,F as j,D as k,z as l,N as m,R as n,U as o,$ as p,H as q,J as r,K as s,X as t,V as u,Q as v};
