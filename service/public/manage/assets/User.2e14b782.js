import{d as L,u as q,n as x,q as h,r as z,o as p,c as f,b as e,t as n,e as l,s as B,p as C,j as D}from"./index.69a584ce.js";import{q as k}from"./project.24401e07.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";const b="/api/user/";let a;async function T(t){return a&&!t||(a=await k({url:"/info",baseURL:b}),typeof a.tokenExpire=="string"&&(a.tokenExpire=new Date(a.tokenExpire))),a}function j(){return k({url:"/logout",baseURL:b})}const M=t=>(C("data-v-a19ce055"),t=t(),D(),t),P={key:0,class:"avatar img"},V=["src","alt"],$={key:1,class:"avatar bg-main text flex center"},A={href:"https://support.qq.com/product/370032",target:"_blank",class:"item flex"},N=M(()=>e("i",{class:"iconfont icon-out"},null,-1)),O=L({__name:"User",setup(t){const{t:_}=q();let c=x(h.get("locale")||"zh-cn");const d={"en-us":{label:"\u8BED\u8A00",value:"\u4E2D\u6587"},"zh-cn":{label:"Language",value:"English"}}[c.value];let u=x(!1),r;const s=z({});async function y(){Object.assign(s,await T())}y();function w(o){c.value=o,h.set("locale",o,{expires:100*360}),window.location.reload()}function I(){w(c.value==="en-us"?"zh-cn":"en-us")}function v(o){r&&clearTimeout(r),o?u.value=o:r=setTimeout(()=>{u.value=!1},100)}async function E(){await j(),location.href="/login"}return(o,i)=>{var m,g;return p(),f("div",{class:"user",onMouseenter:i[0]||(i[0]=U=>v(!0)),onMouseleave:i[1]||(i[1]=U=>v(!1))},[s.avatar?(p(),f("div",P,[e("img",{src:s.avatar,alt:s.name},null,8,V)])):(p(),f("div",$,[e("span",null,n(s.name?s.name[0]:"U"),1)])),e("div",{class:B(["pop",{active:l(u)}])},[e("div",{class:"item flex",onClick:I},[e("span",null,n((m=l(d))==null?void 0:m.label),1),e("span",null,n((g=l(d))==null?void 0:g.value),1)]),e("a",A,n(l(_)("feedback")),1),e("div",{class:"item flex",onClick:E},[e("span",null,n(l(_)("logout")),1),N])],2)],32)}}});const H=S(O,[["__scopeId","data-v-a19ce055"]]);export{H as U};
