import{d as G,h as b,C as k,v as S,o as v,j as _,m as a,t as $,l as B,F as x,p as L,q as z,s as E,z as y,A as V,B as A}from"./vendor.75eb7f42.js";import{i as D,a as H,b as N,d as U}from"./project.beaba6f9.js";import{_ as q}from"./plugin-vue_export-helper.5a098b48.js";import"./index.3ca34998.js";const R=c=>(z("data-v-2ace1c98"),c=c(),E(),c),T=R(()=>a("i",{class:"iconfont icon-plus m-left"},null,-1)),Y={class:"list"},J=["data-i"],K=["onMousedown","onMouseup"],O=["onUpdate:modelValue","onChange"],P=["onClick"],Q=G({setup(c){const{t:r}=b(),d=k().params.id,o=S([]);let i,p=0,l=!1,m=0;async function M(){const e=await D(d,"groups");o.value=e.groups.sort((t,s)=>s.num-t.num)}M();function w(){const e={_id:"",name:r("newGroup"),num:o.value.length,icons:[]};o.value.unshift(e),f(e)}function I(e){N(`${r("delGroupConfirm")}\uFF1A${o.value[e].name}\uFF1F`,async()=>{await U(d,o.value[e]._id),o.value.splice(e,1)})}function C(e){const t=e.target.parentNode;i=t,p=e.y,l=!0,t.style.zIndex="10",m=t.offsetHeight,t.classList.add("active")}function j(e){l&&(i.style.top=`${e.y-p}px`)}function h(e){if(l){l=!1,i.style.top="0",i.style.zIndex="0",i.classList.remove("active");const t=Math.floor((e.y-p)/m),s=+i.dataset.i,u=Math.max(0,s+t);Math.abs(t)>0&&(o.value.splice(u,0,...o.value.splice(s,1)),o.value.forEach((n,F)=>{const g=o.value.length-F-1;g!==n.num&&(n.num=g,f(n))}))}}async function f(e){const t=await H(d,e);e._id||(e._id=t._id)}return(e,t)=>(v(),_(x,null,[a("div",{class:"item flex center c-main pointer",onClick:w},[a("span",null,$(B(r)("addGroup")),1),T]),a("div",Y,[(v(!0),_(x,null,L(o.value,(s,u)=>(v(),_("div",{class:"item flex stretch","data-i":u},[a("div",{class:"drag iconfont icon-drag",onMousedown:y(C,["prevent"]),onMousemove:j,onMouseup:y(h,["prevent"]),onMouseleave:h},null,40,K),V(a("input",{class:"grow",type:"text","onUpdate:modelValue":n=>s.name=n,onChange:n=>f(s)},null,40,O),[[A,s.name]]),a("div",{class:"opt iconfont icon-delete c-danger",onClick:n=>I(u)},null,8,P)],8,J))),256))])],64))}});var oe=q(Q,[["__scopeId","data-v-2ace1c98"]]);export{oe as default};
