import{d as g,h as x,i as b,z as j,r as w,o as y,j as U,k as u,m as e,A as k,t as r,l as t,B as _,C as p,w as S,F as I,q as C,s as N,D}from"./vendor.feadc916.js";import{H as V}from"./Header.26564811.js";import{c as B,e as R,s as P}from"./project.75c7b3e6.js";import{t as m,a as H,b as M}from"./request.e0696538.js";import{r as T}from"./index.43747a1a.js";import{_ as $}from"./plugin-vue_export-helper.5a098b48.js";const q={iconfontResource:/^(https?:)?\/\/at\.alicdn\.com\/t\/.+\.(cs|j)s$/i};function A(c){return q.iconfontResource.test(c)}const i=c=>(C("data-v-ddbbcc64"),c=c(),N(),c),E={class:"main flex stretch"},F={class:"project bg-main grow flex center"},L=i(()=>e("div",{class:"slogan-left"},"Make",-1)),O=["onSubmit"],z={class:"item"},G={class:"input flex"},J=i(()=>e("i",{class:"iconfont icon-name"},null,-1)),K={class:"item"},Q={class:"input flex"},W=i(()=>e("i",{class:"iconfont icon-source"},null,-1)),X={class:"t-right"},Y=["disabled"],Z={class:"illus flex"},ee=i(()=>e("div",{class:"slogan-right"},"icon in control",-1)),se={class:"img"},te=["src"],oe=g({setup(c){const{t:o}=x(),s=b({_id:"",name:"",type:1,resourceUrl:""}),f=j(()=>s.name&&A(s.resourceUrl));async function h(){m(o("creatingProject"));const a=await B({name:s.name,sources:[H(s.resourceUrl)]});s._id=a._id,await v(),T.replace(`/icons/${a._id}`)}async function v(){const a=M(s.resourceUrl,s.type),n={projectId:s._id||"",_id:"",name:"\u521D\u59CB\u6E90",type:s.type,resourceUrl:a.resourceUrl,syncUrl:a.syncUrl,prefix:"",className:""},{_id:l}=await R(n);await P(s._id,l),m.success(o("creatingProjectDone"))}return(a,n)=>{const l=w("router-link");return y(),U(I,null,[u(V,{back:"/home"}),e("div",E,[e("div",F,[L,e("form",{onSubmit:k(h,["prevent"]),class:"fm"},[e("h1",null,r(t(o)("newProject")),1),e("h2",null,r(t(o)("fillProjectNameAndSource")),1),e("div",z,[e("label",null,r(t(o)("projectName")),1),e("div",G,[J,_(e("input",{class:"grow",autocomplete:"off",autofocus:"",maxlength:"15",type:"text",name:"name","onUpdate:modelValue":n[0]||(n[0]=d=>t(s).name=d)},null,512),[[p,t(s).name]])])]),e("div",K,[e("label",null,r(t(o)("iconSourceOfIconfont")),1),e("div",Q,[W,_(e("input",{class:"grow",autocomplete:"off",maxlength:"100",type:"text",name:"resourceUrl","onUpdate:modelValue":n[1]||(n[1]=d=>t(s).resourceUrl=d)},null,512),[[p,t(s).resourceUrl]])]),e("p",X,[u(l,{to:"/help",class:"link"},{default:S(()=>[D(r(t(o)("howToGetOnlineLink")),1)]),_:1})])]),e("button",{class:"bg-danger",type:"submit",disabled:!t(f)},r(t(o)("createNow")),9,Y)],40,O)]),e("div",Z,[ee,e("div",se,[e("img",{src:"/imgs/illus-2.png",alt:"iconLake"},null,8,te)])])])],64)}}});var de=$(oe,[["__scopeId","data-v-ddbbcc64"]]);export{de as default};
