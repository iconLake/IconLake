import{d as b,u as w,E as F,m as d,p as I,o as L,c as i,b as e,t as u,e as f,v as B,F as D,h as V,i as $,k as a,f as _,_ as j}from"./index.c3ac6b9b.js";import{p as g,b as z,f as E}from"./project.3e053923.js";import{i as H,t as N,h as P}from"./cache.05004cf3.js";import"./@iconlake/client.0b258216.js";import"./extension.dbd15d4c.js";const U={class:"member"},A={class:"invite flex start"},R={class:"list"},S=["title"],T=["onClick"],q=b({__name:"Member",setup(G){const{t:c}=w(),y=$(),s=F().params.id,p=d(""),r=d(""),l=d([]),m=I(()=>`${location.origin}/manage/project/${s}/invite?code=${r.value}`);async function h(){g.info(s,"userId invite").onUpdate(async t=>{p.value=t.userId,t.invite?+new Date(t.invite.expired)-Date.now()<60*1e3?v():r.value=t.invite.code:v()})}async function k(){g.getMembers(s).onUpdate(async t=>{l.value=t})}L(()=>{Promise.all([h(),k()]).finally(()=>{y.end()})});async function v(){const t=await z(s);r.value=t.code}function C(){H(m.value),N(c("copyDone"))}function x(t){const n=l.value[t];P(`${c("removeConfirm")}${n.user.name||""}\uFF1F`,()=>{E(s,n._id),l.value.splice(t,1)})}return(t,n)=>(a(),i("div",U,[e("div",A,[n[1]||(n[1]=e("div",{class:"m-right"},[e("svg",{t:"1640187477633",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8789",width:"32",height:"32"},[e("path",{d:"M515.7888 690.3296L860.2624 486.4V162.7136c0-48.1792-37.9392-87.2448-84.6848-87.2448H256c-46.7968 0-84.6848 39.0656-84.6848 87.2448V486.4l344.4736 203.9296z",fill:"#FFE37B","p-id":"8790"}),e("path",{d:"M890.6752 454.7584l-363.3664 228.3008c-7.0656 4.4032-16.0256 4.4032-23.04 0L140.9024 454.7584c-17.8688-11.264-40.192 2.8672-40.192 25.4464v319.7952c0 84.8384 62.8736 153.6 140.4416 153.6h549.2736c77.568 0 140.4416-68.7616 140.4416-153.6V480.2048c0-22.528-22.3232-36.6592-40.192-25.4464zM661.8624 270.592H323.072c-28.2624 0-51.2-22.9376-51.2-51.2s22.9376-51.2 51.2-51.2h338.7392c28.2624 0 51.2 22.9376 51.2 51.2s-22.8864 51.2-51.1488 51.2z",fill:"#8C7BFD","p-id":"8791"}),e("path",{d:"M515.7888 449.536H323.072c-28.2624 0-51.2-22.9376-51.2-51.2s22.9376-51.2 51.2-51.2h192.7168c28.2624 0 51.2 22.9376 51.2 51.2s-22.9376 51.2-51.2 51.2z",fill:"#8C7BFD","p-id":"8792"})])],-1)),e("div",null,[e("p",null,u(f(c)("inviteLink")),1),e("p",{class:"c-main pointer",onClick:C},[B(u(m.value),1),n[0]||(n[0]=e("i",{class:"iconfont icon-copy m-left"},null,-1))])])]),e("div",R,[(a(!0),i(D,null,V(l.value,(o,M)=>(a(),i("div",{key:o._id,class:"item flex"},[e("span",null,u(o.user.name||o.userId),1),e("div",null,[o.isAdmin?(a(),i("i",{key:0,class:"iconfont icon-admin c-danger",title:f(c)("admin")},null,8,S)):_("",!0),p.value!==o.userId?(a(),i("i",{key:1,class:"iconfont icon-delete c-danger m-left pointer",onClick:K=>x(M)},null,8,T)):_("",!0)])]))),128))])]))}});const Z=j(q,[["__scopeId","data-v-8273a356"]]);export{Z as default};
