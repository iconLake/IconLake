import{d as x,u as b,B as F,n as u,v as M,c as o,b as e,t as p,e as v,D as B,F as D,g as L,o as i,f as h,p as V,j as $}from"./index.44bd5203.js";import{i as j,g as z,u as S,f as H,t as N,b as E,h as A}from"./project.10559182.js";import{_ as P}from"./_plugin-vue_export-helper.cdc0426e.js";const g=a=>(V("data-v-a5479d4c"),a=a(),$(),a),R={class:"member"},T={class:"invite flex start"},U=g(()=>e("div",{class:"m-right"},[e("svg",{t:"1640187477633",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8789",width:"32",height:"32"},[e("path",{d:"M515.7888 690.3296L860.2624 486.4V162.7136c0-48.1792-37.9392-87.2448-84.6848-87.2448H256c-46.7968 0-84.6848 39.0656-84.6848 87.2448V486.4l344.4736 203.9296z",fill:"#FFE37B","p-id":"8790"}),e("path",{d:"M890.6752 454.7584l-363.3664 228.3008c-7.0656 4.4032-16.0256 4.4032-23.04 0L140.9024 454.7584c-17.8688-11.264-40.192 2.8672-40.192 25.4464v319.7952c0 84.8384 62.8736 153.6 140.4416 153.6h549.2736c77.568 0 140.4416-68.7616 140.4416-153.6V480.2048c0-22.528-22.3232-36.6592-40.192-25.4464zM661.8624 270.592H323.072c-28.2624 0-51.2-22.9376-51.2-51.2s22.9376-51.2 51.2-51.2h338.7392c28.2624 0 51.2 22.9376 51.2 51.2s-22.8864 51.2-51.1488 51.2z",fill:"#8C7BFD","p-id":"8791"}),e("path",{d:"M515.7888 449.536H323.072c-28.2624 0-51.2-22.9376-51.2-51.2s22.9376-51.2 51.2-51.2h192.7168c28.2624 0 51.2 22.9376 51.2 51.2s-22.9376 51.2-51.2 51.2z",fill:"#8C7BFD","p-id":"8792"})])],-1)),q=g(()=>e("i",{class:"iconfont icon-copy m-left"},null,-1)),G={class:"list"},J=["title"],K=["onClick"],O=x({__name:"Member",setup(a){const{t:c}=b(),s=F().params.id,_=u(""),r=u(""),d=u([]),m=M(()=>`${location.origin}/manage/project/${s}/invite?code=${r.value}`);async function y(){const t=await j(s,"userId invite");_.value=t.userId,t.invite?+new Date(t.invite.expired)-Date.now()<60*1e3?f():r.value=t.invite.code:f()}y();async function w(){d.value=await z(s)}w();async function f(){const t=await S(s);r.value=t.code}function I(){H(m.value),N(c("copyDone"))}function k(t){const l=d.value[t];E(`${c("removeConfirm")}${l.user.name||""}\uFF1F`,()=>{A(s,l._id),d.value.splice(t,1)})}return(t,l)=>(i(),o("div",R,[e("div",T,[U,e("div",null,[e("p",null,p(v(c)("inviteLink")),1),e("p",{class:"c-main pointer",onClick:I},[B(p(v(m)),1),q])])]),e("div",G,[(i(!0),o(D,null,L(d.value,(n,C)=>(i(),o("div",{class:"item flex",key:n._id},[e("span",null,p(n.user.name||n.userId),1),e("div",null,[n.isAdmin?(i(),o("i",{key:0,class:"iconfont icon-admin c-danger",title:v(c)("admin")},null,8,J)):h("",!0),_.value!==n.userId?(i(),o("i",{key:1,class:"iconfont icon-delete c-danger m-left pointer",onClick:W=>k(C)},null,8,K)):h("",!0)])]))),128))])]))}});const ee=P(O,[["__scopeId","data-v-a5479d4c"]]);export{ee as default};
