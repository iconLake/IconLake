import{g as sa,B as ca,p as xr}from"./@iconlake/client.0b258216.js";import{x as Or,y as Ar,z as la}from"./index.c3ac6b9b.js";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Tn=function(e,t){return Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Tn(e,t)};function fa(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Tn(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var B=function(){return B=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},B.apply(this,arguments)};function Kt(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,a;r<i;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var H=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:sa,z=Object.keys,L=Array.isArray;typeof Promise<"u"&&!H.Promise&&(H.Promise=Promise);function te(e,t){return typeof t!="object"||z(t).forEach(function(n){e[n]=t[n]}),e}var He=Object.getPrototypeOf,ha={}.hasOwnProperty;function Y(e,t){return ha.call(e,t)}function We(e,t){typeof t=="function"&&(t=t(He(e))),(typeof Reflect>"u"?z:Reflect.ownKeys)(t).forEach(function(n){_e(e,n,t[n])})}var vi=Object.defineProperty;function _e(e,t,n,r){vi(e,t,te(n&&Y(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Je(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_e(e.prototype,"constructor",e),{extend:We.bind(null,e.prototype)}}}}var da=Object.getOwnPropertyDescriptor;function yi(e,t){var n=da(e,t),r;return n||(r=He(e))&&yi(r,t)}var pa=[].slice;function Wt(e,t,n){return pa.call(e,t,n)}function mi(e,t){return t(e)}function it(e){if(!e)throw new Error("Assertion Failed")}function gi(e){H.setImmediate?setImmediate(e):setTimeout(e,0)}function va(e,t){return e.reduce(function(n,r,i){var a=t(r,i);return a&&(n[a[0]]=a[1]),n},{})}function de(e,t){if(typeof t=="string"&&Y(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,i=t.length;r<i;++r){var a=de(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(o!==-1){var u=e[t.substr(0,o)];return u==null?void 0:de(u,t.substr(o+1))}}function ee(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){it(typeof n!="string"&&"length"in n);for(var r=0,i=t.length;r<i;++r)ee(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),u=t.substr(a+1);if(u==="")n===void 0?L(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var s=e[o];(!s||!Y(e,o))&&(s=e[o]={}),ee(s,u,n)}}else n===void 0?L(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ya(e,t){typeof t=="string"?ee(e,t,void 0):"length"in t&&[].map.call(t,function(n){ee(e,n,void 0)})}function bi(e){var t={};for(var n in e)Y(e,n)&&(t[n]=e[n]);return t}var ma=[].concat;function wi(e){return ma.apply([],e)}var ga="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(wi([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return H[e]}),_i=new Set(ga.map(function(e){return H[e]}));function Ei(e){var t={};for(var n in e)if(Y(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||_i.has(r.constructor)?r:Ei(r)}return t}function ba(e){for(var t in e)if(Y(e,t))return!1;return!0}var ot=null;function Ee(e){ot=new WeakMap;var t=Cn(e);return ot=null,t}function Cn(e){if(!e||typeof e!="object")return e;var t=ot.get(e);if(t)return t;if(L(e)){t=[],ot.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(Cn(e[n]))}else if(_i.has(e.constructor))t=e;else{var i=He(e);t=i===Object.prototype?{}:Object.create(i),ot.set(e,t);for(var a in e)Y(e,a)&&(t[a]=Cn(e[a]))}return t}var wa={}.toString;function Pn(e){return wa.call(e).slice(8,-1)}var Dn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",_a=typeof Dn=="symbol"?function(e){var t;return e!=null&&(t=e[Dn])&&t.apply(e)}:function(){return null};function Se(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var $e={};function he(e){var t,n,r,i;if(arguments.length===1){if(L(e))return e.slice();if(this===$e&&typeof e=="string")return[e];if(i=_a(e)){for(n=[];r=i.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Yn=typeof Symbol<"u"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ea=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],xi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Xn=Ea.concat(xi),xa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Qe(e,t){this.name=e,this.message=t}Je(Qe).from(Error).extend({toString:function(){return this.name+": "+this.message}});function Oi(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join(`
`)}function Mt(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Oi(e,t)}Je(Mt).from(Qe);function Ve(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Oi(e,this.failures)}Je(Ve).from(Qe);var Jn=Xn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Oa=Qe,P=Xn.reduce(function(e,t){var n=t+"Error";function r(i,a){this.name=n,i?typeof i=="string"?(this.message="".concat(i).concat(a?`
 `+a:""),this.inner=a||null):typeof i=="object"&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=xa[t]||n,this.inner=null)}return Je(r).from(Oa),e[t]=r,e},{});P.Syntax=SyntaxError;P.Type=TypeError;P.Range=RangeError;var Rr=xi.reduce(function(e,t){return e[t+"Error"]=P[t],e},{});function Aa(e,t){if(!e||e instanceof Qe||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Rr[e.name])return e;var n=new Rr[e.name](t||e.message,e);return"stack"in e&&_e(n,"stack",{get:function(){return this.inner.stack}}),n}var Gt=Xn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=P[t]),e},{});Gt.ModifyError=Mt;Gt.DexieError=Qe;Gt.BulkError=Ve;function F(){}function vt(e){return e}function Ra(e,t){return e==null||e===vt?t:function(n){return t(e(n))}}function Ie(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Sa(e,t){return e===F?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ie(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Ie(i,this.onerror):i),a!==void 0?a:n}}function Ta(e,t){return e===F?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ie(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ie(r,this.onerror):r)}}function Ca(e,t){return e===F?t:function(n){var r=e.apply(this,arguments);te(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?Ie(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Ie(a,this.onerror):a),r===void 0?o===void 0?void 0:o:te(r,o)}}function Pa(e,t){return e===F?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function Qn(e,t){return e===F?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var le=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ai(e,t){le=e}var lt={},Ri=100,Zn=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,He(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,He(t),e]}(),Sr=Zn[0],Tr=Zn[1],Da=Zn[2],ka=Tr&&Tr.then,ut=Sr&&Sr.constructor,er=!!Da;function Ia(){queueMicrotask(Ka)}var ft=function(e,t){at.push([e,t]),Ft&&(Ia(),Ft=!1)},kn=!0,Ft=!0,Pe=[],St=[],In=vt,we={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:F,pgp:!1,env:{},finalize:F},R=we,at=[],De=0,Tt=[];function O(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=R;if(typeof e!="function"){if(e!==lt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&Kn(this,this._value);return}this._state=null,this._value=null,++t.ref,Ti(this,e)}var Bn={get:function(){var e=R,t=Nt;function n(r,i){var a=this,o=!e.global&&(e!==R||t!==Nt),u=o&&!Oe(),s=new O(function(c,f){tr(a,new Si(Cr(r,e,o,u),Cr(i,e,o,u),c,f,e))});return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=lt,n},set:function(e){_e(this,"then",e&&e.prototype===lt?Bn:{get:function(){return e},set:Bn.set})}};We(O.prototype,{then:Bn,_then:function(e,t){tr(this,new Si(null,null,e,t,R))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Ct(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Ct(r)})},finally:function(e){return this.then(function(t){return O.resolve(e()).then(function(){return t})},function(t){return O.resolve(e()).then(function(){return Ct(t)})})},timeout:function(e,t){var n=this;return e<1/0?new O(function(r,i){var a=setTimeout(function(){return i(new P.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,a))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&_e(O.prototype,Symbol.toStringTag,"Dexie.Promise");we.env=Pi();function Si(e,t,n,r,i){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=i}We(O,{all:function(){var e=he.apply(null,arguments).map(Lt);return new O(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(i,a){return O.resolve(i).then(function(o){e[a]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof O)return e;if(e&&typeof e.then=="function")return new O(function(n,r){e.then(n,r)});var t=new O(lt,!0,e);return t},reject:Ct,race:function(){var e=he.apply(null,arguments).map(Lt);return new O(function(t,n){e.map(function(r){return O.resolve(r).then(t,n)})})},PSD:{get:function(){return R},set:function(e){return R=e}},totalEchoes:{get:function(){return Nt}},newPSD:xe,usePSD:Be,scheduler:{get:function(){return ft},set:function(e){ft=e}},rejectionMapper:{get:function(){return In},set:function(e){In=e}},follow:function(e,t){return new O(function(n,r){return xe(function(i,a){var o=R;o.unhandleds=[],o.onunhandled=a,o.finalize=Ie(function(){var u=this;Ma(function(){u.unhandleds.length===0?i():a(u.unhandleds[0])})},o.finalize),e()},t,n,r)})}});ut&&(ut.allSettled&&_e(O,"allSettled",function(){var e=he.apply(null,arguments).map(Lt);return new O(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,a){return O.resolve(i).then(function(o){return r[a]={status:"fulfilled",value:o}},function(o){return r[a]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),ut.any&&typeof AggregateError<"u"&&_e(O,"any",function(){var e=he.apply(null,arguments).map(Lt);return new O(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(a,o){return O.resolve(a).then(function(u){return t(u)},function(u){i[o]=u,--r||n(new AggregateError(i))})})})}));function Ti(e,t){try{t(function(n){if(e._state===null){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ze();n&&typeof n.then=="function"?Ti(e,function(i,a){n instanceof O?n._then(i,a):n.then(i,a)}):(e._state=!0,e._value=n,Ci(e)),r&&et()}},Kn.bind(null,e))}catch(n){Kn(e,n)}}function Kn(e,t){if(St.push(t),e._state===null){var n=e._lib&&Ze();t=In(t),e._state=!1,e._value=t,Fa(e),Ci(e),n&&et()}}function Ci(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)tr(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),De===0&&(++De,ft(function(){--De===0&&nr()},[]))}function tr(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++De,ft(Ba,[n,e,t])}function Ba(e,t,n){try{var r,i=t._value;!t._state&&St.length&&(St=[]),r=le&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),!t._state&&St.indexOf(i)===-1&&Na(t),n.resolve(r)}catch(a){n.reject(a)}finally{--De===0&&nr(),--n.psd.ref||n.psd.finalize()}}function Ka(){Be(we,function(){Ze()&&et()})}function Ze(){var e=kn;return kn=!1,Ft=!1,e}function et(){var e,t,n;do for(;at.length>0;)for(e=at,at=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(at.length>0);kn=!0,Ft=!0}function nr(){var e=Pe;Pe=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Tt.slice(0),n=t.length;n;)t[--n]()}function Ma(e){function t(){e(),Tt.splice(Tt.indexOf(t),1)}Tt.push(t),++De,ft(function(){--De===0&&nr()},[])}function Fa(e){Pe.some(function(t){return t._value===e._value})||Pe.push(e)}function Na(e){for(var t=Pe.length;t;)if(Pe[--t]._value===e._value){Pe.splice(t,1);return}}function Ct(e){return new O(lt,!1,e)}function N(e,t){var n=R;return function(){var r=Ze(),i=R;try{return Ae(n,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{Ae(i,!1),r&&et()}}}var V={awaits:0,echoes:0,id:0},La=0,Pt=[],Dt=0,Nt=0,ja=0;function xe(e,t,n,r){var i=R,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++ja,we.env,a.env=er?{Promise:O,PromiseProp:{value:O,configurable:!0,writable:!0},all:O.all,race:O.race,allSettled:O.allSettled,any:O.any,resolve:O.resolve,reject:O.reject}:{},t&&te(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=Be(a,e,n,r);return a.ref===0&&a.finalize(),o}function tt(){return V.id||(V.id=++La),++V.awaits,V.echoes+=Ri,V.id}function Oe(){return V.awaits?(--V.awaits===0&&(V.id=0),V.echoes=V.awaits*Ri,!0):!1}(""+ka).indexOf("[native code]")===-1&&(tt=Oe=F);function Lt(e){return V.echoes&&e&&e.constructor===ut?(tt(),e.then(function(t){return Oe(),t},function(t){return Oe(),U(t)})):e}function Ua(e){++Nt,(!V.echoes||--V.echoes===0)&&(V.echoes=V.awaits=V.id=0),Pt.push(R),Ae(e,!0)}function $a(){var e=Pt[Pt.length-1];Pt.pop(),Ae(e,!1)}function Ae(e,t){var n=R;if((t?V.echoes&&(!Dt++||e!==R):Dt&&(!--Dt||e!==R))&&queueMicrotask(t?Ua.bind(null,e):$a),e!==R&&(R=e,n===we&&(we.env=Pi()),er)){var r=we.env.Promise,i=e.env;(n.global||e.global)&&(Object.defineProperty(H,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function Pi(){var e=H.Promise;return er?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(H,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Be(e,t,n,r,i){var a=R;try{return Ae(e,!0),t(n,r,i)}finally{Ae(a,!1)}}function Cr(e,t,n,r){return typeof e!="function"?e:function(){var i=R;n&&tt(),Ae(t,!0);try{return e.apply(this,arguments)}finally{Ae(i,!1),r&&queueMicrotask(Oe)}}}function nn(e){Promise===ut&&V.echoes===0?Dt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var U=O.reject;function Mn(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!R.letThrough&&!e._vip){if(e._state.openComplete)return U(new P.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return U(new P.DatabaseClosed);e.open().catch(F)}return e._state.dbReadyPromise.then(function(){return Mn(e,t,n,r)})}else{var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===Jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Mn(e,t,n,r)})):U(a)}return i._promise(t,function(a,o){return xe(function(){return R.trans=i,r(a,o,i)})}).then(function(a){if(t==="readwrite")try{i.idbtrans.commit()}catch{}return t==="readonly"?a:i._completion.then(function(){return a})})}}var Pr="4.0.7",Ce=String.fromCharCode(65535),Fn=-1/0,fe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Di="String expected.",ze=[],Yt="__dbnames",rn="readonly",an="readwrite";function Ke(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ki={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=Ee(t),delete t[e]),t}:function(t){return t}}function qa(){throw P.Type()}function M(e,t){try{var n=Dr(e),r=Dr(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return za(kr(e),kr(t));case"Array":return Va(e,t)}}catch{}return NaN}function Va(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=M(e[a],t[a]);if(o!==0)return o}return n===r?0:n<r?-1:1}function za(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function Dr(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=Pn(e);return n==="ArrayBuffer"?"binary":n}function kr(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ii=function(){function e(){}return e.prototype._trans=function(t,n,r){var i=this._tx||R.trans,a=this.name,o=le&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(t==="readonly"?"read":"write"," ").concat(this.name));function u(f,l,h){if(!h.schema[a])throw new P.NotFound("Table "+a+" not part of transaction");return n(h.idbtrans,h)}var s=Ze();try{var c=i&&i.db._novip===this.db._novip?i===R.trans?i._promise(t,u,r):xe(function(){return i._promise(t,u,r)},{trans:i,transless:R.transless||R}):Mn(this.db,t,[this.name],u);return o&&(c._consoleTask=o,c=c.catch(function(f){return console.trace(f),U(f)})),c}finally{s&&et()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):t==null?U(new P.Type("Invalid argument to Table.get()")):this._trans("readonly",function(i){return r.core.get({trans:i,key:t}).then(function(a){return r.hook.reading.fire(a)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(L(t))return new this.db.WhereClause(this,"[".concat(t.join("+"),"]"));var n=z(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(l){if(l.compound&&n.every(function(_){return l.keyPath.indexOf(_)>=0})){for(var h=0;h<n.length;++h)if(n.indexOf(l.keyPath[h])===-1)return!1;return!0}return!1}).sort(function(l,h){return l.keyPath.length-h.keyPath.length})[0];if(r&&this.db._maxKey!==Ce){var i=r.keyPath.slice(0,n.length);return this.where(i).equals(i.map(function(l){return t[l]}))}!r&&le&&console.warn("The query ".concat(JSON.stringify(t)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(n.join("+"),"]"));var a=this.schema.idxByName,o=this.db._deps.indexedDB;function u(l,h){return o.cmp(l,h)===0}var s=n.reduce(function(l,h){var _=l[0],d=l[1],v=a[h],y=t[h];return[_||v,_||!v?Ke(d,v&&v.multi?function(m){var g=de(m,h);return L(g)&&g.some(function(b){return u(y,b)})}:function(m){return u(y,de(m,h))}):d]},[null,null]),c=s[0],f=s[1];return c?this.where(c.name).equals(t[c.keyPath]).filter(f):r?this.filter(f):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,L(t)?"[".concat(t.join("+"),"]"):t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){var n=this,r=n.db,i=n.name;this.schema.mappedClass=t,t.prototype instanceof qa&&(t=function(s){fa(c,s);function c(){return s!==null&&s.apply(this,arguments)||this}return Object.defineProperty(c.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),c.prototype.table=function(){return i},c}(t));for(var a=new Set,o=t.prototype;o;o=He(o))Object.getOwnPropertyNames(o).forEach(function(s){return a.add(s)});var u=function(s){if(!s)return s;var c=Object.create(t.prototype);for(var f in s)if(!a.has(f))try{c[f]=s[f]}catch{}return c};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},e.prototype.defineClass=function(){function t(n){te(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=wt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"add",keys:n!=null?[n]:null,values:[u]})}).then(function(s){return s.numFailures?O.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{ee(t,o,s)}catch{}return s})},e.prototype.update=function(t,n){if(typeof t=="object"&&!L(t)){var r=de(t,this.schema.primKey.keyPath);return r===void 0?U(new P.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this,i=this.schema.primKey,a=i.auto,o=i.keyPath,u=t;return o&&a&&(u=wt(o)(t)),this._trans("readwrite",function(s){return r.core.mutate({trans:s,type:"put",values:[u],keys:n!=null?[n]:null})}).then(function(s){return s.numFailures?O.reject(s.failures[0]):s.lastResult}).then(function(s){if(o)try{ee(t,o,s)}catch{}return s})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?O.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:ki})}).then(function(n){return n.numFailures?O.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(i){return i.map(function(a){return n.hook.reading.fire(a)})})})},e.prototype.bulkAdd=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,f=s.keyPath;if(f&&a)throw new P.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new P.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,h=f&&c?t.map(wt(f)):t;return i.core.mutate({trans:u,type:"add",keys:a,values:h,wantResults:o}).then(function(_){var d=_.numFailures,v=_.results,y=_.lastResult,m=_.failures,g=o?v:y;if(d===0)return g;throw new Ve("".concat(i.name,".bulkAdd(): ").concat(d," of ").concat(l," operations failed"),m)})})},e.prototype.bulkPut=function(t,n,r){var i=this,a=Array.isArray(n)?n:void 0;r=r||(a?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(u){var s=i.schema.primKey,c=s.auto,f=s.keyPath;if(f&&a)throw new P.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==t.length)throw new P.InvalidArgument("Arguments objects and keys must have the same length");var l=t.length,h=f&&c?t.map(wt(f)):t;return i.core.mutate({trans:u,type:"put",keys:a,values:h,wantResults:o}).then(function(_){var d=_.numFailures,v=_.results,y=_.lastResult,m=_.failures,g=o?v:y;if(d===0)return g;throw new Ve("".concat(i.name,".bulkPut(): ").concat(d," of ").concat(l," operations failed"),m)})})},e.prototype.bulkUpdate=function(t){var n=this,r=this.core,i=t.map(function(u){return u.key}),a=t.map(function(u){return u.changes}),o=[];return this._trans("readwrite",function(u){return r.getMany({trans:u,keys:i,cache:"clone"}).then(function(s){var c=[],f=[];t.forEach(function(h,_){var d=h.key,v=h.changes,y=s[_];if(y){for(var m=0,g=Object.keys(v);m<g.length;m++){var b=g[m],w=v[b];if(b===n.schema.primKey.keyPath){if(M(w,d)!==0)throw new P.Constraint("Cannot update primary key in bulkUpdate()")}else ee(y,b,w)}o.push(_),c.push(d),f.push(y)}});var l=c.length;return r.mutate({trans:u,type:"put",keys:c,values:f,updates:{keys:i,changeSpecs:a}}).then(function(h){var _=h.numFailures,d=h.failures;if(_===0)return l;for(var v=0,y=Object.keys(d);v<y.length;v++){var m=y[v],g=o[Number(m)];if(g!=null){var b=d[m];delete d[m],d[g]=b}}throw new Ve("".concat(n.name,".bulkUpdate(): ").concat(_," of ").concat(l," operations failed"),d)})})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(i){return n.core.mutate({trans:i,type:"delete",keys:t})}).then(function(i){var a=i.numFailures,o=i.lastResult,u=i.failures;if(a===0)return o;throw new Ve("".concat(n.name,".bulkDelete(): ").concat(a," of ").concat(r," operations failed"),u)})},e}();function yt(e){var t={},n=function(u,s){if(s){for(var c=arguments.length,f=new Array(c-1);--c;)f[c-1]=arguments[c];return t[u].subscribe.apply(null,f),e}else if(typeof u=="string")return t[u]};n.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return n;function a(u,s,c){if(typeof u=="object")return o(u);s||(s=Pa),c||(c=F);var f={subscribers:[],fire:c,subscribe:function(l){f.subscribers.indexOf(l)===-1&&(f.subscribers.push(l),f.fire=s(f.fire,l))},unsubscribe:function(l){f.subscribers=f.subscribers.filter(function(h){return h!==l}),f.fire=f.subscribers.reduce(s,c)}};return t[u]=n[u]=f,f}function o(u){z(u).forEach(function(s){var c=u[s];if(L(c))a(s,u[s][0],u[s][1]);else if(c==="asap")var f=a(s,vt,function(){for(var h=arguments.length,_=new Array(h);h--;)_[h]=arguments[h];f.subscribers.forEach(function(d){gi(function(){d.apply(null,_)})})});else throw new P.InvalidArgument("Invalid event config")})}}function mt(e,t){return Je(t).from({prototype:e}),t}function Ha(e){return mt(Ii.prototype,function(n,r,i){this.db=e,this._tx=i,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:yt(null,{creating:[Sa,F],reading:[Ra,vt],updating:[Ca,F],deleting:[Ta,F]})})}function Ne(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function on(e,t){e.filter=Ke(e.filter,t)}function un(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Ke(r(),t())}:t,e.justLimit=n&&!r}function Wa(e,t){e.isMatch=Ke(e.isMatch,t)}function kt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new P.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ir(e,t,n){var r=kt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function _t(e,t,n,r){var i=e.replayFilter?Ke(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(u,s,c){if(!i||i(s,c,function(h){return s.stop(h)},function(h){return s.fail(h)})){var f=s.primaryKey,l=""+f;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(f)),Y(a,l)||(a[l]=!0,t(u,s,c))}};return Promise.all([e.or._iterate(o,n),Br(Ir(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return Br(Ir(e,r,n),Ke(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Br(e,t,n,r){var i=r?function(o,u,s){return n(r(o),u,s)}:n,a=N(i);return e.then(function(o){if(o)return o.start(function(){var u=function(){return o.continue()};(!t||t(o,function(s){return u=s},function(s){o.stop(s),u=F},function(s){o.fail(s),u=F}))&&a(o.value,o,function(s){return u=s}),u()})})}var Ga=function(){function e(t){Object.assign(this,t)}return e.prototype.execute=function(t){var n;if(this.add!==void 0){var r=this.add;if(L(r))return Kt(Kt([],L(t)?t:[],!0),r,!0).sort();if(typeof r=="number")return(Number(t)||0)+r;if(typeof r=="bigint")try{return BigInt(t)+r}catch{return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(this.remove!==void 0){var i=this.remove;if(L(i))return L(t)?t.filter(function(o){return!i.includes(o)}).sort():[];if(typeof i=="number")return Number(t)-i;if(typeof i=="bigint")try{return BigInt(t)-i}catch{return BigInt(0)-i}throw new TypeError("Invalid subtrahend ".concat(i))}var a=(n=this.replacePrefix)===null||n===void 0?void 0:n[0];return a&&typeof t=="string"&&t.startsWith(a)?this.replacePrefix[1]+t.substring(a.length):t},e}(),Ya=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,U.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,U.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Ke(n.algorithm,t)},e.prototype._iterate=function(t,n){return _t(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&te(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return _t(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var i=n._ctx,a=i.table.core;if(Ne(i,!0))return a.count({trans:r,query:{index:kt(i,a.schema),range:i.range}}).then(function(u){return Math.min(u,i.limit)});var o=0;return _t(i,function(){return++o,!1},r,a).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),i=r[0],a=r.length-1;function o(c,f){return f?o(c[r[f]],f-1):c[i]}var u=this._ctx.dir==="next"?1:-1;function s(c,f){var l=o(c,a),h=o(f,a);return l<h?-u:l>h?u:0}return this.toArray(function(c){return c.sort(s)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var i=n._ctx;if(i.dir==="next"&&Ne(i,!0)&&i.limit>0){var a=i.valueMapper,o=kt(i,i.table.core.schema);return i.table.core.query({trans:r,limit:i.limit,values:!0,query:{index:o,range:i.range}}).then(function(s){var c=s.result;return a?c.map(a):c})}else{var u=[];return _t(i,function(s){return u.push(s)},r,i.table.core).then(function(){return u})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,Ne(n)?un(n,function(){var r=t;return function(i,a){return r===0?!0:r===1?(--r,!1):(a(function(){i.advance(r),r=0}),!1)}}):un(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),un(this._ctx,function(){var n=t;return function(r,i,a){return--n<=0&&i(a),n>=0}},!0),this},e.prototype.until=function(t,n){return on(this._ctx,function(r,i,a){return t(r.value)?(i(a),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return on(this._ctx,function(n){return t(n.value)}),Wa(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.key,i)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){t(i.primaryKey,i)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&Ne(n,!0)&&n.limit>0)return this._read(function(i){var a=kt(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:a,range:n.range}})}).then(function(i){var a=i.result;return a}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,a){r.push(a.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return on(this._ctx,function(i){var a=i.primaryKey.toString(),o=Y(r,a);return r[a]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(i){var a;if(typeof t=="function")a=t;else{var o=z(t),u=o.length;a=function(m){for(var g=!1,b=0;b<u;++b){var w=o[b],p=t[w],E=de(m,w);p instanceof Ga?(ee(m,w,p.execute(E)),g=!0):E!==p&&(ee(m,w,p),g=!0)}return g}}var s=r.table.core,c=s.schema.primaryKey,f=c.outbound,l=c.extractKey,h=n.db._options.modifyChunkSize||200,_=[],d=0,v=[],y=function(m,g){var b=g.failures,w=g.numFailures;d+=m-w;for(var p=0,E=z(b);p<E.length;p++){var x=E[p];_.push(b[x])}};return n.clone().primaryKeys().then(function(m){var g=Ne(r)&&r.limit===1/0&&(typeof t!="function"||t===sn)&&{index:r.index,range:r.range},b=function(w){var p=Math.min(h,m.length-w);return s.getMany({trans:i,keys:m.slice(w,w+p),cache:"immutable"}).then(function(E){for(var x=[],A=[],D=f?[]:null,I=[],S=0;S<p;++S){var k=E[S],T={value:Ee(k),primKey:m[w+S]};a.call(T,T.value,T)!==!1&&(T.value==null?I.push(m[w+S]):!f&&M(l(k),l(T.value))!==0?(I.push(m[w+S]),x.push(T.value)):(A.push(T.value),f&&D.push(m[w+S])))}return Promise.resolve(x.length>0&&s.mutate({trans:i,type:"add",values:x}).then(function(K){for(var C in K.failures)I.splice(parseInt(C),1);y(x.length,K)})).then(function(){return(A.length>0||g&&typeof t=="object")&&s.mutate({trans:i,type:"put",keys:D,values:A,criteria:g,changeSpec:typeof t!="function"&&t,isAdditionalChunk:w>0}).then(function(K){return y(A.length,K)})}).then(function(){return(I.length>0||g&&t===sn)&&s.mutate({trans:i,type:"delete",keys:I,criteria:g,isAdditionalChunk:w>0}).then(function(K){return y(I.length,K)})}).then(function(){return m.length>w+p&&b(w+h)})})};return b(0).then(function(){if(_.length>0)throw new Mt("Error modifying one or more objects",_,d,v);return m.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return Ne(t)&&(t.isPrimKey||n.type===3)?this._write(function(r){var i=t.table.core.schema.primaryKey,a=n;return t.table.core.count({trans:r,query:{index:i,range:a}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(u){var s=u.failures;u.lastResult,u.results;var c=u.numFailures;if(c)throw new Mt("Could not delete some values",Object.keys(s).map(function(f){return s[f]}),o-c);return o-c})})}):this.modify(sn)},e}(),sn=function(e,t){return t.value=null};function Xa(e){return mt(Ya.prototype,function(n,r){this.db=e;var i=ki,a=null;if(r)try{i=r()}catch(c){a=c}var o=n._ctx,u=o.table,s=u.hook.reading.fire;this._ctx={table:u,index:o.index,isPrimKey:!o.index||u.schema.primKey.keyPath&&o.index===u.schema.primKey.name,range:i,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:a,or:o.or,valueMapper:s!==vt?s:null}})}function Ja(e,t){return e<t?-1:e===t?0:1}function Qa(e,t){return e>t?-1:e===t?0:1}function Z(e,t,n){var r=e instanceof Ki?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Le(e){return new e.Collection(e,function(){return Bi("")}).limit(0)}function Za(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function eo(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function to(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),u=-1,s=0;s<o;++s){var c=t[s];if(c!==r[s])return i(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):i(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):u>=0?e.substr(0,u)+t[u]+n.substr(u+1):null;i(e[s],c)<0&&(u=s)}return o<r.length&&a==="next"?e+n.substr(e.length):o<e.length&&a==="prev"?e.substr(0,n.length):u<0?null:e.substr(0,u)+r[u]+n.substr(u+1)}function Et(e,t,n,r){var i,a,o,u,s,c,f,l=n.length;if(!n.every(function(v){return typeof v=="string"}))return Z(e,Di);function h(v){i=Za(v),a=eo(v),o=v==="next"?Ja:Qa;var y=n.map(function(m){return{lower:a(m),upper:i(m)}}).sort(function(m,g){return o(m.lower,g.lower)});u=y.map(function(m){return m.upper}),s=y.map(function(m){return m.lower}),c=v,f=v==="next"?"":r}h("next");var _=new e.Collection(e,function(){return ye(u[0],s[l-1]+r)});_._ondirectionchange=function(v){h(v)};var d=0;return _._addAlgorithm(function(v,y,m){var g=v.key;if(typeof g!="string")return!1;var b=a(g);if(t(b,s,d))return!0;for(var w=null,p=d;p<l;++p){var E=to(g,b,u[p],s[p],o,c);E===null&&w===null?d=p+1:(w===null||o(w,E)>0)&&(w=E)}return y(w!==null?function(){v.continue(w+f)}:m),!1}),_}function ye(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Bi(e){return{type:1,lower:e,upper:e}}var Ki=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(t,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||i)&&!(r&&i)?Le(this):new this.Collection(this,function(){return ye(t,n,!r,!i)})}catch{return Z(this,fe)}},e.prototype.equals=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return Bi(t)})},e.prototype.above=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return ye(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return ye(t,void 0,!1)})},e.prototype.below=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return ye(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?Z(this,fe):new this.Collection(this,function(){return ye(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?Z(this,Di):this.between(t,t+Ce,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):Et(this,function(n,r){return n.indexOf(r[0])===0},[t],Ce)},e.prototype.equalsIgnoreCase=function(t){return Et(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=he.apply($e,arguments);return t.length===0?Le(this):Et(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=he.apply($e,arguments);return t.length===0?Le(this):Et(this,function(n,r){return r.some(function(i){return n.indexOf(i)===0})},t,Ce)},e.prototype.anyOf=function(){var t=this,n=he.apply($e,arguments),r=this._cmp;try{n.sort(r)}catch{return Z(this,fe)}if(n.length===0)return Le(this);var i=new this.Collection(this,function(){return ye(n[0],n[n.length-1])});i._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var a=0;return i._addAlgorithm(function(o,u,s){for(var c=o.key;r(c,n[a])>0;)if(++a,a===n.length)return u(s),!1;return r(c,n[a])===0?!0:(u(function(){o.continue(n[a])}),!1)}),i},e.prototype.notEqual=function(t){return this.inAnyRange([[Fn,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=he.apply($e,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return Z(this,fe)}var n=t.reduce(function(r,i){return r?r.concat([[r[r.length-1][1],i]]):[[Fn,i]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,i=this._cmp,a=this._ascending,o=this._descending,u=this._min,s=this._max;if(t.length===0)return Le(this);if(!t.every(function(p){return p[0]!==void 0&&p[1]!==void 0&&a(p[0],p[1])<=0}))return Z(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",P.InvalidArgument);var c=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;function l(p,E){for(var x=0,A=p.length;x<A;++x){var D=p[x];if(i(E[0],D[1])<0&&i(E[1],D[0])>0){D[0]=u(D[0],E[0]),D[1]=s(D[1],E[1]);break}}return x===A&&p.push(E),p}var h=a;function _(p,E){return h(p[0],E[0])}var d;try{d=t.reduce(l,[]),d.sort(_)}catch{return Z(this,fe)}var v=0,y=f?function(p){return a(p,d[v][1])>0}:function(p){return a(p,d[v][1])>=0},m=c?function(p){return o(p,d[v][0])>0}:function(p){return o(p,d[v][0])>=0};function g(p){return!y(p)&&!m(p)}var b=y,w=new this.Collection(this,function(){return ye(d[0][0],d[d.length-1][1],!c,!f)});return w._ondirectionchange=function(p){p==="next"?(b=y,h=a):(b=m,h=o),d.sort(_)},w._addAlgorithm(function(p,E,x){for(var A=p.key;b(A);)if(++v,v===d.length)return E(x),!1;return g(A)?!0:(r._cmp(A,d[v][1])===0||r._cmp(A,d[v][0])===0||E(function(){h===a?p.continue(d[v][0]):p.continue(d[v][1])}),!1)}),w},e.prototype.startsWithAnyOf=function(){var t=he.apply($e,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Le(this):this.inAnyRange(t.map(function(n){return[n,n+Ce]})):Z(this,"startsWithAnyOf() only works with strings")},e}();function no(e){return mt(Ki.prototype,function(n,r,i){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:i},this._cmp=this._ascending=M,this._descending=function(a,o){return M(o,a)},this._max=function(a,o){return M(a,o)>0?a:o},this._min=function(a,o){return M(a,o)<0?a:o},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new P.MissingAPI})}function ce(e){return N(function(t){return ht(t),e(t.target.error),!1})}function ht(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var gt="storagemutated",Nn="x-storagemutated-1",Re=yt(null,gt),ro=function(){function e(){}return e.prototype._lock=function(){return it(!R.global),++this._reculock,this._reculock===1&&!R.global&&(R.lockOwnerFor=this),this},e.prototype._unlock=function(){if(it(!R.global),--this._reculock===0)for(R.global||(R.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{Be(t[1],t[0])}catch{}}return this},e.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,i=this.db._state.dbOpenError;if(it(!this.idbtrans),!t&&!r)switch(i&&i.name){case"DatabaseClosedError":throw new P.DatabaseClosed(i);case"MissingAPIError":throw new P.MissingAPI(i.message,i);default:throw new P.OpenFailed(i)}if(!this.active)throw new P.TransactionInactive;return it(this._completion._state===null),t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),t.onerror=N(function(a){ht(a),n._reject(t.error)}),t.onabort=N(function(a){ht(a),n.active&&n._reject(new P.Abort(t.error)),n.active=!1,n.on("abort").fire(a)}),t.oncomplete=N(function(){n.active=!1,n._resolve(),"mutatedParts"in t&&Re.storagemutated.fire(t.mutatedParts)}),this},e.prototype._promise=function(t,n,r){var i=this;if(t==="readwrite"&&this.mode!=="readwrite")return U(new P.ReadOnly("Transaction is readonly"));if(!this.active)return U(new P.TransactionInactive);if(this._locked())return new O(function(o,u){i._blockedFuncs.push([function(){i._promise(t,n,r).then(o,u)},R])});if(r)return xe(function(){var o=new O(function(u,s){i._lock();var c=n(u,s,i);c&&c.then&&c.then(u,s)});return o.finally(function(){return i._unlock()}),o._lib=!0,o});var a=new O(function(o,u){var s=n(o,u,i);s&&s.then&&s.then(o,u)});return a._lib=!0,a},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=O.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var a=n._waitingFor;return new O(function(o,u){r.then(function(s){return n._waitingQueue.push(N(o.bind(null,s)))},function(s){return n._waitingQueue.push(N(u.bind(null,s)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new P.Abort))},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(Y(n,t))return n[t];var r=this.schema[t];if(!r)throw new P.NotFound("Table "+t+" not part of transaction");var i=new this.db.Table(t,r,this);return i.core=this.db.core.table(t),n[t]=i,i},e}();function io(e){return mt(ro.prototype,function(n,r,i,a,o){var u=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=i,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=yt(this,"complete","error","abort"),this.parent=o||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new O(function(s,c){u._resolve=s,u._reject=c}),this._completion.then(function(){u.active=!1,u.on.complete.fire()},function(s){var c=u.active;return u.active=!1,u.on.error.fire(s),u.parent?u.parent._reject(s):c&&u.idbtrans&&u.idbtrans.abort(),U(s)})})}function Ln(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Mi(t)}}function Mi(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function rr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:va(n,function(r){return[r.name,r]})}}function ao(e){return e.length===1?e[0]:e}var dt=function(e){try{return e.only([[]]),dt=function(){return[[]]},[[]]}catch{return dt=function(){return Ce},Ce}};function jn(e){return e==null?function(){}:typeof e=="string"?oo(e):function(t){return de(t,e)}}function oo(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return de(n,e)}}function Kr(e){return[].slice.call(e)}var uo=0;function st(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function so(e,t,n){function r(l,h){var _=Kr(l.objectStoreNames);return{schema:{name:l.name,tables:_.map(function(d){return h.objectStore(d)}).map(function(d){var v=d.keyPath,y=d.autoIncrement,m=L(v),g=v==null,b={},w={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:g,compound:m,keyPath:v,autoIncrement:y,unique:!0,extractKey:jn(v)},indexes:Kr(d.indexNames).map(function(p){return d.index(p)}).map(function(p){var E=p.name,x=p.unique,A=p.multiEntry,D=p.keyPath,I=L(D),S={name:E,compound:I,keyPath:D,unique:x,multiEntry:A,extractKey:jn(D)};return b[st(D)]=S,S}),getIndexByKeyPath:function(p){return b[st(p)]}};return b[":id"]=w.primaryKey,v!=null&&(b[st(v)]=w.primaryKey),w})},hasGetAll:_.length>0&&"getAll"in h.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function i(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=l.lower,_=l.upper,d=l.lowerOpen,v=l.upperOpen,y=h===void 0?_===void 0?null:t.upperBound(_,!!v):_===void 0?t.lowerBound(h,!!d):t.bound(h,_,!!d,!!v);return y}function a(l){var h=l.name;function _(y){var m=y.trans,g=y.type,b=y.keys,w=y.values,p=y.range;return new Promise(function(E,x){E=N(E);var A=m.objectStore(h),D=A.keyPath==null,I=g==="put"||g==="add";if(!I&&g!=="delete"&&g!=="deleteRange")throw new Error("Invalid operation type: "+g);var S=(b||w||{length:1}).length;if(b&&w&&b.length!==w.length)throw new Error("Given keys array must have same length as given values array.");if(S===0)return E({numFailures:0,failures:{},results:[],lastResult:void 0});var k,T=[],K=[],C=0,j=function(se){++C,ht(se)};if(g==="deleteRange"){if(p.type===4)return E({numFailures:C,failures:K,results:[],lastResult:void 0});p.type===3?T.push(k=A.clear()):T.push(k=A.delete(i(p)))}else{var ie=I?D?[w,b]:[w,null]:[b,null],pe=ie[0],ue=ie[1];if(I)for(var ne=0;ne<S;++ne)T.push(k=ue&&ue[ne]!==void 0?A[g](pe[ne],ue[ne]):A[g](pe[ne])),k.onerror=j;else for(var ne=0;ne<S;++ne)T.push(k=A[g](pe[ne])),k.onerror=j}var ve=function(se){var rt=se.target.result;T.forEach(function(ae,bt){return ae.error!=null&&(K[bt]=ae.error)}),E({numFailures:C,failures:K,results:g==="delete"?b:T.map(function(ae){return ae.result}),lastResult:rt})};k.onerror=function(se){j(se),ve(se)},k.onsuccess=ve})}function d(y){var m=y.trans,g=y.values,b=y.query,w=y.reverse,p=y.unique;return new Promise(function(E,x){E=N(E);var A=b.index,D=b.range,I=m.objectStore(h),S=A.isPrimaryKey?I:I.index(A.name),k=w?p?"prevunique":"prev":p?"nextunique":"next",T=g||!("openKeyCursor"in S)?S.openCursor(i(D),k):S.openKeyCursor(i(D),k);T.onerror=ce(x),T.onsuccess=N(function(K){var C=T.result;if(!C){E(null);return}C.___id=++uo,C.done=!1;var j=C.continue.bind(C),ie=C.continuePrimaryKey;ie&&(ie=ie.bind(C));var pe=C.advance.bind(C),ue=function(){throw new Error("Cursor not started")},ne=function(){throw new Error("Cursor not stopped")};C.trans=m,C.stop=C.continue=C.continuePrimaryKey=C.advance=ue,C.fail=N(x),C.next=function(){var ve=this,se=1;return this.start(function(){return se--?ve.continue():ve.stop()}).then(function(){return ve})},C.start=function(ve){var se=new Promise(function(ae,bt){ae=N(ae),T.onerror=ce(bt),C.fail=bt,C.stop=function(ua){C.stop=C.continue=C.continuePrimaryKey=C.advance=ne,ae(ua)}}),rt=function(){if(T.result)try{ve()}catch(ae){C.fail(ae)}else C.done=!0,C.start=function(){throw new Error("Cursor behind last entry")},C.stop()};return T.onsuccess=N(function(ae){T.onsuccess=rt,rt()}),C.continue=j,C.continuePrimaryKey=ie,C.advance=pe,rt(),se},E(C)},x)})}function v(y){return function(m){return new Promise(function(g,b){g=N(g);var w=m.trans,p=m.values,E=m.limit,x=m.query,A=E===1/0?void 0:E,D=x.index,I=x.range,S=w.objectStore(h),k=D.isPrimaryKey?S:S.index(D.name),T=i(I);if(E===0)return g({result:[]});if(y){var K=p?k.getAll(T,A):k.getAllKeys(T,A);K.onsuccess=function(pe){return g({result:pe.target.result})},K.onerror=ce(b)}else{var C=0,j=p||!("openKeyCursor"in k)?k.openCursor(T):k.openKeyCursor(T),ie=[];j.onsuccess=function(pe){var ue=j.result;if(!ue)return g({result:ie});if(ie.push(p?ue.value:ue.primaryKey),++C===E)return g({result:ie});ue.continue()},j.onerror=ce(b)}})}}return{name:h,schema:l,mutate:_,getMany:function(y){var m=y.trans,g=y.keys;return new Promise(function(b,w){b=N(b);for(var p=m.objectStore(h),E=g.length,x=new Array(E),A=0,D=0,I,S=function(C){var j=C.target;(x[j._pos]=j.result)!=null,++D===A&&b(x)},k=ce(w),T=0;T<E;++T){var K=g[T];K!=null&&(I=p.get(g[T]),I._pos=T,I.onsuccess=S,I.onerror=k,++A)}A===0&&b(x)})},get:function(y){var m=y.trans,g=y.key;return new Promise(function(b,w){b=N(b);var p=m.objectStore(h),E=p.get(g);E.onsuccess=function(x){return b(x.target.result)},E.onerror=ce(w)})},query:v(s),openCursor:d,count:function(y){var m=y.query,g=y.trans,b=m.index,w=m.range;return new Promise(function(p,E){var x=g.objectStore(h),A=b.isPrimaryKey?x:x.index(b.name),D=i(w),I=D?A.count(D):A.count();I.onsuccess=N(function(S){return p(S.target.result)}),I.onerror=ce(E)})}}}var o=r(e,n),u=o.schema,s=o.hasGetAll,c=u.tables.map(function(l){return a(l)}),f={};return c.forEach(function(l){return f[l.name]=l}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(l){var h=f[l];if(!h)throw new Error("Table '".concat(l,"' not found"));return f[l]},MIN_KEY:-1/0,MAX_KEY:dt(t),schema:u}}function co(e,t){return t.reduce(function(n,r){var i=r.create;return B(B({},n),i(n))},e)}function lo(e,t,n,r){var i=n.IDBKeyRange;n.indexedDB;var a=co(so(t,i,r),e.dbcore);return{dbcore:a}}function jt(e,t){var n=t.db,r=lo(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(i){var a=i.name;e.core.schema.tables.some(function(o){return o.name===a})&&(i.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=i.core))})}function Ut(e,t,n,r){n.forEach(function(i){var a=r[i];t.forEach(function(o){var u=yi(o,i);(!u||"value"in u&&u.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?_e(o,i,{get:function(){return this.table(i)},set:function(s){vi(this,i,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new e.Table(i,a))})})}function Un(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function fo(e,t){return e._cfg.version-t._cfg.version}function ho(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=rr("$meta",Ni("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var o=a._reject.bind(a),u=R.transless||R;xe(function(){if(R.trans=a,R.transless=u,t===0)z(i).forEach(function(s){ar(n,s,i[s].primKey,i[s].indexes)}),jt(e,n),O.follow(function(){return e.on.populate.fire(a)}).catch(o);else return jt(e,n),vo(e,a,t).then(function(s){return yo(e,s,a,n)}).catch(o)})}function po(e,t){Fi(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Xt(e,e.idbdb,t);qt(e,e._dbSchema,t);for(var r=ir(n,e._dbSchema),i=function(c){if(c.change.length||c.recreate)return console.warn("Unable to patch indexes of table ".concat(c.name," because it has changes on the type of index or primary key.")),{value:void 0};var f=t.objectStore(c.name);c.add.forEach(function(l){le&&console.debug("Dexie upgrade patch: Creating missing index ".concat(c.name,".").concat(l.src)),$t(f,l)})},a=0,o=r.change;a<o.length;a++){var u=o[a],s=i(u);if(typeof s=="object")return s.value}}function vo(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(r){return r!=null?r:n}):O.resolve(n)}function yo(e,t,n,r){var i=[],a=e._versions,o=e._dbSchema=Xt(e,e.idbdb,r),u=a.filter(function(c){return c._cfg.version>=t});if(u.length===0)return O.resolve();u.forEach(function(c){i.push(function(){var f=o,l=c._cfg.dbschema;qt(e,f,r),qt(e,l,r),o=e._dbSchema=l;var h=ir(f,l);h.add.forEach(function(g){ar(r,g[0],g[1].primKey,g[1].indexes)}),h.change.forEach(function(g){if(g.recreate)throw new P.Upgrade("Not yet support for changing primary key");var b=r.objectStore(g.name);g.add.forEach(function(w){return $t(b,w)}),g.change.forEach(function(w){b.deleteIndex(w.name),$t(b,w)}),g.del.forEach(function(w){return b.deleteIndex(w)})});var _=c._cfg.contentUpgrade;if(_&&c._cfg.version>t){jt(e,r),n._memoizedTables={};var d=bi(l);h.del.forEach(function(g){d[g]=f[g]}),Un(e,[e.Transaction.prototype]),Ut(e,[e.Transaction.prototype],z(d),d),n.schema=d;var v=Yn(_);v&&tt();var y,m=O.follow(function(){if(y=_(n),y&&v){var g=Oe.bind(null,null);y.then(g,g)}});return y&&typeof y.then=="function"?O.resolve(y):m.then(function(){return y})}}),i.push(function(f){var l=c._cfg.dbschema;mo(l,f),Un(e,[e.Transaction.prototype]),Ut(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),i.push(function(f){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===c._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(l){return l!=="$meta"})):f.objectStore("$meta").put(c._cfg.version,"version"))})});function s(){return i.length?O.resolve(i.shift()(n.idbtrans)).then(s):O.resolve()}return s().then(function(){Fi(o,r)})}function ir(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var i=e[r],a=t[r];if(!i)n.add.push([r,a]);else{var o={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)o.recreate=!0,n.change.push(o);else{var u=i.idxByName,s=a.idxByName,c=void 0;for(c in u)s[c]||o.del.push(c);for(c in s){var f=u[c],l=s[c];f?f.src!==l.src&&o.change.push(l):o.add.push(l)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function ar(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(a){return $t(i,a)}),i}function Fi(e,t){z(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(le&&console.debug("Dexie: Creating missing table",n),ar(t,n,e[n].primKey,e[n].indexes))})}function mo(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function $t(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Xt(e,t,n){var r={},i=Wt(t.objectStoreNames,0);return i.forEach(function(a){for(var o=n.objectStore(a),u=o.keyPath,s=Ln(Mi(u),u||"",!0,!1,!!o.autoIncrement,u&&typeof u!="string",!0),c=[],f=0;f<o.indexNames.length;++f){var l=o.index(o.indexNames[f]);u=l.keyPath;var h=Ln(l.name,u,!!l.unique,!!l.multiEntry,!1,u&&typeof u!="string",!1);c.push(h)}r[a]=rr(a,s,c)}),r}function go(e,t,n){e.verno=t.version/10;var r=e._dbSchema=Xt(e,t,n);e._storeNames=Wt(t.objectStoreNames,0),Ut(e,[e._allTables],z(r),r)}function bo(e,t){var n=Xt(e,e.idbdb,t),r=ir(n,e._dbSchema);return!(r.add.length||r.change.some(function(i){return i.add.length||i.change.length}))}function qt(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var a=r[i],o=n.objectStore(a);e._hasGetAll="getAll"in o;for(var u=0;u<o.indexNames.length;++u){var s=o.indexNames[u],c=o.index(s).keyPath,f=typeof c=="string"?c:"["+Wt(c).join("+")+"]";if(t[a]){var l=t[a].idxByName[f];l&&(l.name=s,delete t[a].idxByName[f],t[a].idxByName[s]=l)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&H.WorkerGlobalScope&&H instanceof H.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ni(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Ln(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),L(i),n===0)})}var wo=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){z(t).forEach(function(r){if(t[r]!==null){var i=Ni(t[r]),a=i.shift();if(a.unique=!0,a.multi)throw new P.Schema("Primary key cannot be multi-valued");i.forEach(function(o){if(o.auto)throw new P.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new P.Schema("Index must have a name and cannot be an empty string")}),n[r]=rr(r,a,i)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?te(this._cfg.storesSource,t):t;var r=n._versions,i={},a={};return r.forEach(function(o){te(i,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(i,a)}),n._dbSchema=a,Un(n,[n._allTables,n,n.Transaction.prototype]),Ut(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],z(a),a),n._storeNames=z(a),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=Qn(this._cfg.contentUpgrade||F,t),this},e}();function _o(e){return mt(wo.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function or(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Ge(Yt,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function ur(e){return e&&typeof e.databases=="function"}function Eo(e){var t=e.indexedDB,n=e.IDBKeyRange;return ur(t)?Promise.resolve(t.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Yt})}):or(t,n).toCollection().primaryKeys()}function xo(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!ur(n)&&t!==Yt&&or(n,r).put({name:t}).catch(F)}function Oo(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!ur(n)&&t!==Yt&&or(n,r).delete(t).catch(F)}function $n(e){return xe(function(){return R.letThrough=!0,e()})}function Ao(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};t=setInterval(r,100),r()}).finally(function(){return clearInterval(t)})}var cn;function sr(e){return!("from"in e)}var G=function(e,t){if(this)te(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new G;return e&&"d"in e&&te(n,e),n}};We(G.prototype,(cn={add:function(e){return Vt(this,e),this},addKey:function(e){return pt(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return pt(t,n,n)}),this}},cn[Dn]=function(){return Vn(this)},cn));function pt(e,t,n){var r=M(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(sr(e))return te(e,{from:t,to:n,d:1});var i=e.l,a=e.r;if(M(n,e.from)<0)return i?pt(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Mr(e);if(M(t,e.to)>0)return a?pt(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Mr(e);M(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),M(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var o=!e.r;i&&!e.l&&Vt(e,i),a&&o&&Vt(e,a)}}function Vt(e,t){function n(r,i){var a=i.from,o=i.to,u=i.l,s=i.r;pt(r,a,o),u&&n(r,u),s&&n(r,s)}sr(t)||n(e,t)}function qn(e,t){var n=Vn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Vn(e),o=a.next(i.from),u=o.value;!r.done&&!o.done;){if(M(u.from,i.to)<=0&&M(u.to,i.from)>=0)return!0;M(i.from,u.from)<0?i=(r=n.next(u.from)).value:u=(o=a.next(i.from)).value}return!1}function Vn(e){var t=sr(e)?null:{s:0,n:e};return{next:function(n){for(var r=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&M(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||M(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Mr(e){var t,n,r=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){var a=i==="r"?"l":"r",o=B({},e),u=e[i];e.from=u.from,e.to=u.to,e[i]=u[i],o[i]=u[a],e[a]=o,o.d=Fr(o)}e.d=Fr(e)}function Fr(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Jt(e,t){return z(t).forEach(function(n){e[n]?Vt(e[n],t[n]):e[n]=Ei(t[n])}),e}function cr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&qn(t[n],e[n])})}var ke={},ln={},fn=!1;function xt(e,t){Jt(ln,e),fn||(fn=!0,setTimeout(function(){fn=!1;var n=ln;ln={},lr(n,!1)},0))}function lr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(ke);r<i.length;r++){var a=i[r];Nr(a,e,n,t)}else for(var o in e){var u=/^idb\:\/\/(.*)\/(.*)\//.exec(o);if(u){var s=u[1],c=u[2],a=ke["idb://".concat(s,"/").concat(c)];a&&Nr(a,e,n,t)}}n.forEach(function(f){return f()})}function Nr(e,t,n,r){for(var i=[],a=0,o=Object.entries(e.queries.query);a<o.length;a++){for(var u=o[a],s=u[0],c=u[1],f=[],l=0,h=c;l<h.length;l++){var _=h[l];cr(t,_.obsSet)?_.subscribers.forEach(function(m){return n.add(m)}):r&&f.push(_)}r&&i.push([s,f])}if(r)for(var d=0,v=i;d<v.length;d++){var y=v[d],s=y[0],f=y[1];e.queries.query[s]=f}}function Ro(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?U(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(e.verno*10),a=!1;function o(){if(t.openCanceller!==r)throw new P.DatabaseClosed("db.open() was cancelled")}var u=t.dbReadyResolve,s=null,c=!1,f=function(){return new O(function(l,h){if(o(),!n)throw new P.MissingAPI;var _=e.name,d=t.autoSchema||!i?n.open(_):n.open(_,i);if(!d)throw new P.MissingAPI;d.onerror=ce(h),d.onblocked=N(e._fireOnBlocked),d.onupgradeneeded=N(function(v){if(s=d.transaction,t.autoSchema&&!e._options.allowEmptyDB){d.onerror=ht,s.abort(),d.result.close();var y=n.deleteDatabase(_);y.onsuccess=y.onerror=N(function(){h(new P.NoSuchDatabase("Database ".concat(_," doesnt exist")))})}else{s.onerror=ce(h);var m=v.oldVersion>Math.pow(2,62)?0:v.oldVersion;c=m<1,e.idbdb=d.result,a&&po(e,s),ho(e,m/10,s,h)}},h),d.onsuccess=N(function(){s=null;var v=e.idbdb=d.result,y=Wt(v.objectStoreNames);if(y.length>0)try{var m=v.transaction(ao(y),"readonly");if(t.autoSchema)go(e,v,m);else if(qt(e,e._dbSchema,m),!bo(e,m)&&!a)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),v.close(),i=v.version+1,a=!0,l(f());jt(e,m)}catch{}ze.push(e),v.onversionchange=N(function(g){t.vcFired=!0,e.on("versionchange").fire(g)}),v.onclose=N(function(g){e.on("close").fire(g)}),c&&xo(e._deps,_),l()},h)}).catch(function(l){switch(l==null?void 0:l.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),f();break;case"VersionError":if(i>0)return i=0,f();break}return O.reject(l)})};return O.race([r,(typeof navigator>"u"?O.resolve():Ao()).then(f)]).then(function(){return o(),t.onReadyBeingFired=[],O.resolve($n(function(){return e.on.ready.fire(e.vip)})).then(function l(){if(t.onReadyBeingFired.length>0){var h=t.onReadyBeingFired.reduce(Qn,F);return t.onReadyBeingFired=[],O.resolve($n(function(){return h(e.vip)})).then(l)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(l){t.dbOpenError=l;try{s&&s.abort()}catch{}return r===t.openCanceller&&e._close(),U(l)}).finally(function(){t.openComplete=!0,u()}).then(function(){if(c){var l={};e.tables.forEach(function(h){h.schema.indexes.forEach(function(_){_.name&&(l["idb://".concat(e.name,"/").concat(h.name,"/").concat(_.name)]=new G(-1/0,[[[]]]))}),l["idb://".concat(e.name,"/").concat(h.name,"/")]=l["idb://".concat(e.name,"/").concat(h.name,"/:dels")]=new G(-1/0,[[[]]])}),Re(gt).fire(l),lr(l,!0)}return e})}function zn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=a(t),i=a(n);function a(o){return function(u){var s=o(u),c=s.value;return s.done?c:!c||typeof c.then!="function"?L(c)?Promise.all(c).then(r,i):r(c):c.then(r,i)}}return a(t)()}function So(e,t,n){var r=arguments.length;if(r<2)throw new P.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var a=wi(i);return[e,a,n]}function Li(e,t,n,r,i){return O.resolve().then(function(){var a=R.transless||R,o=e._createTransaction(t,n,e._dbSchema,r);o.explicit=!0;var u={trans:o,transless:a};if(r)o.idbtrans=r.idbtrans;else try{o.create(),o.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(l){return l.name===Jn.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e.close({disableAutoOpen:!1}),e.open().then(function(){return Li(e,t,n,null,i)})):U(l)}var s=Yn(i);s&&tt();var c,f=O.follow(function(){if(c=i.call(o,o),c)if(s){var l=Oe.bind(null,null);c.then(l,l)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=zn(c))},u);return(c&&typeof c.then=="function"?O.resolve(c).then(function(l){return o.active?l:U(new P.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return c})).then(function(l){return r&&o._resolve(),o._completion.then(function(){return l})}).catch(function(l){return o._reject(l),U(l)})})}function Ot(e,t,n){for(var r=L(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}function To(e){return B(B({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},a=[];function o(v,y,m){var g=st(v),b=i[g]=i[g]||[],w=v==null?0:typeof v=="string"?1:v.length,p=y>0,E=B(B({},m),{name:p?"".concat(g,"(virtual-from:").concat(m.name,")"):m.name,lowLevelIndex:m,isVirtual:p,keyTail:y,keyLength:w,extractKey:jn(v),unique:!p&&m.unique});if(b.push(E),E.isPrimaryKey||a.push(E),w>1){var x=w===2?v[0]:v.slice(0,w-1);o(x,y+1,m)}return b.sort(function(A,D){return A.keyTail-D.keyTail}),E}var u=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[u];for(var s=0,c=r.indexes;s<c.length;s++){var f=c[s];o(f.keyPath,0,f)}function l(v){var y=i[st(v)];return y&&y[0]}function h(v,y){return{type:v.type===1?2:v.type,lower:Ot(v.lower,v.lowerOpen?e.MAX_KEY:e.MIN_KEY,y),lowerOpen:!0,upper:Ot(v.upper,v.upperOpen?e.MIN_KEY:e.MAX_KEY,y),upperOpen:!0}}function _(v){var y=v.query.index;return y.isVirtual?B(B({},v),{query:{index:y.lowLevelIndex,range:h(v.query.range,y.keyTail)}}):v}var d=B(B({},n),{schema:B(B({},r),{primaryKey:u,indexes:a,getIndexByKeyPath:l}),count:function(v){return n.count(_(v))},query:function(v){return n.query(_(v))},openCursor:function(v){var y=v.query.index,m=y.keyTail,g=y.isVirtual,b=y.keyLength;if(!g)return n.openCursor(v);function w(p){function E(A){A!=null?p.continue(Ot(A,v.reverse?e.MAX_KEY:e.MIN_KEY,m)):v.unique?p.continue(p.key.slice(0,b).concat(v.reverse?e.MIN_KEY:e.MAX_KEY,m)):p.continue()}var x=Object.create(p,{continue:{value:E},continuePrimaryKey:{value:function(A,D){p.continuePrimaryKey(Ot(A,e.MAX_KEY,m),D)}},primaryKey:{get:function(){return p.primaryKey}},key:{get:function(){var A=p.key;return b===1?A[0]:A.slice(0,b)}},value:{get:function(){return p.value}}});return x}return n.openCursor(_(v)).then(function(p){return p&&w(p)})}});return d}})}var Co={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:To};function fr(e,t,n,r){return n=n||{},r=r||"",z(e).forEach(function(i){if(!Y(t,i))n[r+i]=void 0;else{var a=e[i],o=t[i];if(typeof a=="object"&&typeof o=="object"&&a&&o){var u=Pn(a),s=Pn(o);u!==s?n[r+i]=t[i]:u==="Object"?fr(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i])}else a!==o&&(n[r+i]=t[i])}}),z(t).forEach(function(i){Y(e,i)||(n[r+i]=t[i])}),n}function hr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Po={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return B(B({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,i=B(B({},n),{mutate:function(a){var o=R.trans,u=o.table(t).hook,s=u.deleting,c=u.creating,f=u.updating;switch(a.type){case"add":if(c.fire===F)break;return o._promise("readwrite",function(){return l(a)},!0);case"put":if(c.fire===F&&f.fire===F)break;return o._promise("readwrite",function(){return l(a)},!0);case"delete":if(s.fire===F)break;return o._promise("readwrite",function(){return l(a)},!0);case"deleteRange":if(s.fire===F)break;return o._promise("readwrite",function(){return h(a)},!0)}return n.mutate(a);function l(d){var v=R.trans,y=d.keys||hr(r,d);if(!y)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?B(B({},d),{keys:y}):B({},d),d.type!=="delete"&&(d.values=Kt([],d.values,!0)),d.keys&&(d.keys=Kt([],d.keys,!0)),Do(n,d,y).then(function(m){var g=y.map(function(b,w){var p=m[w],E={onerror:null,onsuccess:null};if(d.type==="delete")s.fire.call(E,b,p,v);else if(d.type==="add"||p===void 0){var x=c.fire.call(E,b,d.values[w],v);b==null&&x!=null&&(b=x,d.keys[w]=b,r.outbound||ee(d.values[w],r.keyPath,b))}else{var A=fr(p,d.values[w]),D=f.fire.call(E,A,b,p,v);if(D){var I=d.values[w];Object.keys(D).forEach(function(S){Y(I,S)?I[S]=D[S]:ee(I,S,D[S])})}}return E});return n.mutate(d).then(function(b){for(var w=b.failures,p=b.results,E=b.numFailures,x=b.lastResult,A=0;A<y.length;++A){var D=p?p[A]:y[A],I=g[A];D==null?I.onerror&&I.onerror(w[A]):I.onsuccess&&I.onsuccess(d.type==="put"&&m[A]?d.values[A]:D)}return{failures:w,results:p,numFailures:E,lastResult:x}}).catch(function(b){return g.forEach(function(w){return w.onerror&&w.onerror(b)}),Promise.reject(b)})})}function h(d){return _(d.trans,d.range,1e4)}function _(d,v,y){return n.query({trans:d,values:!1,query:{index:r,range:v},limit:y}).then(function(m){var g=m.result;return l({type:"delete",keys:g,trans:d}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):g.length<y?{failures:[],numFailures:0,lastResult:void 0}:_(d,B(B({},v),{lower:g[g.length-1],lowerOpen:!0}),y)})})}}});return i}})}};function Do(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function ji(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)M(t.keys[i],e[a])===0&&(r.push(n?Ee(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch{return null}}var ko={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return B(B({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=ji(r.keys,r.trans._cache,r.cache==="clone");return i?O.resolve(i):n.getMany(r).then(function(a){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?Ee(a):a},a})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}};function Ui(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function $i(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Io={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new G(e.MIN_KEY,e.MAX_KEY);return B(B({},e),{transaction:function(r,i,a){if(R.subscr&&i!=="readonly")throw new P.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(R.querier));return e.transaction(r,i,a)},table:function(r){var i=e.table(r),a=i.schema,o=a.primaryKey,u=a.indexes,s=o.extractKey,c=o.outbound,f=o.autoIncrement&&u.filter(function(d){return d.compound&&d.keyPath.includes(o.keyPath)}),l=B(B({},i),{mutate:function(d){var v=d.trans,y=d.mutatedParts||(d.mutatedParts={}),m=function(S){var k="idb://".concat(t,"/").concat(r,"/").concat(S);return y[k]||(y[k]=new G)},g=m(""),b=m(":dels"),w=d.type,p=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[hr(o,d).filter(function(S){return S}),d.values]:[],E=p[0],x=p[1],A=d.trans._cache;if(L(E)){g.addKeys(E);var D=w==="delete"||E.length===x.length?ji(E,A):null;D||b.addKeys(E),(D||x)&&Bo(m,a,D,x)}else if(E){var I={from:E.lower,to:E.upper};b.add(I),g.add(I)}else g.add(n),b.add(n),a.indexes.forEach(function(S){return m(S.name).add(n)});return i.mutate(d).then(function(S){return E&&(d.type==="add"||d.type==="put")&&(g.addKeys(S.results),f&&f.forEach(function(k){var T=d.values.map(function(C){return k.extractKey(C)}),K=k.keyPath.findIndex(function(C){return C===o.keyPath});S.results.forEach(function(C){return T[K]=C}),m(k.name).addKeys(T)})),v.mutatedParts=Jt(v.mutatedParts||{},y),S})}}),h=function(d){var v,y,m=d.query,g=m.index,b=m.range;return[g,new G((v=b.lower)!==null&&v!==void 0?v:e.MIN_KEY,(y=b.upper)!==null&&y!==void 0?y:e.MAX_KEY)]},_={get:function(d){return[o,new G(d.key)]},getMany:function(d){return[o,new G().addKeys(d.keys)]},count:h,query:h,openCursor:h};return z(_).forEach(function(d){l[d]=function(v){var y=R.subscr,m=!!y,g=Ui(R,i)&&$i(d,v),b=g?v.obsSet={}:y;if(m){var w=function(S){var k="idb://".concat(t,"/").concat(r,"/").concat(S);return b[k]||(b[k]=new G)},p=w(""),E=w(":dels"),x=_[d](v),A=x[0],D=x[1];if(d==="query"&&A.isPrimaryKey&&!v.values?E.add(D):w(A.name||"").add(D),!A.isPrimaryKey)if(d==="count")E.add(n);else{var I=d==="query"&&c&&v.values&&i.query(B(B({},v),{values:!1}));return i[d].apply(this,arguments).then(function(S){if(d==="query"){if(c&&v.values)return I.then(function(C){var j=C.result;return p.addKeys(j),S});var k=v.values?S.result.map(s):S.result;v.values?p.addKeys(k):E.addKeys(k)}else if(d==="openCursor"){var T=S,K=v.values;return T&&Object.create(T,{key:{get:function(){return E.addKey(T.primaryKey),T.key}},primaryKey:{get:function(){var C=T.primaryKey;return E.addKey(C),C}},value:{get:function(){return K&&p.addKey(T.primaryKey),T.value}}})}return S})}}return i[d].apply(this,arguments)}}),l}})}};function Bo(e,t,n,r){function i(a){var o=e(a.name||"");function u(c){return c!=null?a.extractKey(c):null}var s=function(c){return a.multiEntry&&L(c)?c.forEach(function(f){return o.addKey(f)}):o.addKey(c)};(n||r).forEach(function(c,f){var l=n&&u(n[f]),h=r&&u(r[f]);M(l,h)!==0&&(l!=null&&s(l),h!=null&&s(h))})}t.indexes.forEach(i)}function Lr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var r=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===r)return null;var i=B({},t);return L(i.keys)&&(i.keys=i.keys.filter(function(a,o){return!(o in n.failures)})),"values"in i&&L(i.values)&&(i.values=i.values.filter(function(a,o){return!(o in n.failures)})),i}function Ko(e,t){return t.lower===void 0?!0:t.lowerOpen?M(e,t.lower)>0:M(e,t.lower)>=0}function Mo(e,t){return t.upper===void 0?!0:t.upperOpen?M(e,t.upper)<0:M(e,t.upper)<=0}function hn(e,t){return Ko(e,t)&&Mo(e,t)}function jr(e,t,n,r,i,a){if(!n||n.length===0)return e;var o=t.query.index,u=o.multiEntry,s=t.query.range,c=r.schema.primaryKey,f=c.extractKey,l=o.extractKey,h=(o.lowLevelIndex||o).extractKey,_=n.reduce(function(d,v){var y=d,m=v.type==="add"||v.type==="put"?v.values.filter(function(p){var E=l(p);return u&&L(E)?E.some(function(x){return hn(x,s)}):hn(E,s)}).map(function(p){return p=Ee(p),a&&Object.freeze(p),p}):[];switch(v.type){case"add":y=d.concat(t.values?m:m.map(function(p){return f(p)}));break;case"put":var g=new G().addKeys(v.values.map(function(p){return f(p)}));y=d.filter(function(p){var E=t.values?f(p):p;return!qn(new G(E),g)}).concat(t.values?m:m.map(function(p){return f(p)}));break;case"delete":var b=new G().addKeys(v.keys);y=d.filter(function(p){var E=t.values?f(p):p;return!qn(new G(E),b)});break;case"deleteRange":var w=v.range;y=d.filter(function(p){return!hn(f(p),w)});break}return y},e);return _===e?e:(_.sort(function(d,v){return M(h(d),h(v))||M(f(d),f(v))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(i.dirty=!0)),a?Object.freeze(_):_)}function Ur(e,t){return M(e.lower,t.lower)===0&&M(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Fo(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var i=M(e,t);if(i===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return i}function No(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var i=M(e,t);if(i===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return i}function Lo(e,t){return Fo(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&No(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function jo(e,t,n,r){var i=ke["idb://".concat(e,"/").concat(t)];if(!i)return[];var a=i.queries[n];if(!a)return[null,!1,i,null];var o=r.query?r.query.index.name:null,u=a[o||""];if(!u)return[null,!1,i,null];switch(n){case"query":var s=u.find(function(l){return l.req.limit===r.limit&&l.req.values===r.values&&Ur(l.req.query.range,r.query.range)});if(s)return[s,!0,i,u];var c=u.find(function(l){var h="limit"in l.req?l.req.limit:1/0;return h>=r.limit&&(r.values?l.req.values:!0)&&Lo(l.req.query.range,r.query.range)});return[c,!1,i,u];case"count":var f=u.find(function(l){return Ur(l.req.query.range,r.query.range)});return[f,!!f,i,u]}}function Uo(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&$o(e,t)})}function $o(e,t){setTimeout(function(){e.subscribers.size===0&&Se(t,e)},3e3)}var qo={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=B(B({},e),{transaction:function(r,i,a){var o=e.transaction(r,i,a);if(i==="readwrite"){var u=new AbortController,s=u.signal,c=function(f){return function(){if(u.abort(),i==="readwrite"){for(var l=new Set,h=0,_=r;h<_.length;h++){var d=_[h],v=ke["idb://".concat(t,"/").concat(d)];if(v){var y=e.table(d),m=v.optimisticOps.filter(function(K){return K.trans===o});if(o._explicit&&f&&o.mutatedParts)for(var g=0,b=Object.values(v.queries.query);g<b.length;g++)for(var w=b[g],p=0,E=w.slice();p<E.length;p++){var x=E[p];cr(x.obsSet,o.mutatedParts)&&(Se(w,x),x.subscribers.forEach(function(K){return l.add(K)}))}else if(m.length>0){v.optimisticOps=v.optimisticOps.filter(function(K){return K.trans!==o});for(var A=0,D=Object.values(v.queries.query);A<D.length;A++)for(var w=D[A],I=0,S=w.slice();I<S.length;I++){var x=S[I];if(x.res!=null&&o.mutatedParts)if(f&&!x.dirty){var k=Object.isFrozen(x.res),T=jr(x.res,x.req,m,y,x,k);x.dirty?(Se(w,x),x.subscribers.forEach(function(j){return l.add(j)})):T!==x.res&&(x.res=T,x.promise=O.resolve({result:T}))}else x.dirty&&Se(w,x),x.subscribers.forEach(function(j){return l.add(j)})}}}}l.forEach(function(K){return K()})}}};o.addEventListener("abort",c(!1),{signal:s}),o.addEventListener("error",c(!1),{signal:s}),o.addEventListener("complete",c(!0),{signal:s})}return o},table:function(r){var i=e.table(r),a=i.schema.primaryKey,o=B(B({},i),{mutate:function(u){var s=R.trans;if(a.outbound||s.db._options.cache==="disabled"||s.explicit)return i.mutate(u);var c=ke["idb://".concat(t,"/").concat(r)];if(!c)return i.mutate(u);var f=i.mutate(u);return(u.type==="add"||u.type==="put")&&(u.values.length>=50||hr(a,u).some(function(l){return l==null}))?f.then(function(l){var h=B(B({},u),{values:u.values.map(function(d,v){var y,m=!((y=a.keyPath)===null||y===void 0)&&y.includes(".")?Ee(d):B({},d);return ee(m,a.keyPath,l.results[v]),m})}),_=Lr(c,h,l);c.optimisticOps.push(_),queueMicrotask(function(){return u.mutatedParts&&xt(u.mutatedParts)})}):(c.optimisticOps.push(u),u.mutatedParts&&xt(u.mutatedParts),f.then(function(l){if(l.numFailures>0){Se(c.optimisticOps,u);var h=Lr(c,u,l);h&&c.optimisticOps.push(h),u.mutatedParts&&xt(u.mutatedParts)}}),f.catch(function(){Se(c.optimisticOps,u),u.mutatedParts&&xt(u.mutatedParts)})),f},query:function(u){var s;if(!Ui(R,i)||!$i("query",u))return i.query(u);var c=((s=R.trans)===null||s===void 0?void 0:s.db._options.cache)==="immutable",f=R,l=f.requery,h=f.signal,_=jo(t,r,"query",u),d=_[0],v=_[1],y=_[2],m=_[3];if(d&&v)d.obsSet=u.obsSet;else{var g=i.query(u).then(function(b){var w=b.result;if(d&&(d.res=w),c){for(var p=0,E=w.length;p<E;++p)Object.freeze(w[p]);Object.freeze(w)}else b.result=Ee(w);return b}).catch(function(b){return m&&d&&Se(m,d),Promise.reject(b)});d={obsSet:u.obsSet,promise:g,subscribers:new Set,type:"query",req:u,dirty:!1},m?m.push(d):(m=[d],y||(y=ke["idb://".concat(t,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),y.queries.query[u.query.index.name||""]=m)}return Uo(d,m,l,h),d.promise.then(function(b){return{result:jr(b.result,u,y==null?void 0:y.optimisticOps,i,d,c)}})}});return o}});return n}};function At(e,t){return new Proxy(e,{get:function(n,r,i){return r==="db"?t:Reflect.get(n,r,i)}})}var Ge=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var i=e.dependencies;this._options=n=B({addons:e.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var a=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:F,dbReadyPromise:null,cancelOpen:F,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};o.dbReadyPromise=new O(function(s){o.dbReadyResolve=s}),o.openCanceller=new O(function(s,c){o.cancelOpen=c}),this._state=o,this.name=t,this.on=yt(this,"populate","blocked","versionchange","close",{ready:[Qn,F]}),this.on.ready.subscribe=mi(this.on.ready.subscribe,function(s){return function(c,f){e.vip(function(){var l=r._state;if(l.openComplete)l.dbOpenError||O.resolve().then(c),f&&s(c);else if(l.onReadyBeingFired)l.onReadyBeingFired.push(c),f&&s(c);else{s(c);var h=r;f||s(function _(){h.on.ready.unsubscribe(c),h.on.ready.unsubscribe(_)})}})}}),this.Collection=Xa(this),this.Table=Ha(this),this.Transaction=io(this),this.Version=_o(this),this.WhereClause=no(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(s.oldVersion/10))}),this._maxKey=dt(n.IDBKeyRange),this._createTransaction=function(s,c,f,l){return new r.Transaction(s,c,f,r._options.chromeTransactionDurability,l)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),ze.filter(function(c){return c.name===r.name&&c!==r&&!c._state.vcFired}).map(function(c){return c.on("versionchange").fire(s)})},this.use(ko),this.use(qo),this.use(Io),this.use(Co),this.use(Po);var u=new Proxy(this,{get:function(s,c,f){if(c==="_vip")return!0;if(c==="table")return function(h){return At(r.table(h),u)};var l=Reflect.get(s,c,f);return l instanceof Ii?At(l,u):c==="tables"?l.map(function(h){return At(h,u)}):c==="_createTransaction"?function(){var h=l.apply(this,arguments);return At(h,u)}:l}});this.vip=u,a.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new P.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new P.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(i){return i._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(fo),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this.idbdb&&(this._state.openComplete||R.letThrough||this._vip)?t():new O(function(r,i){if(n._state.openComplete)return i(new P.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen){i(new P.DatabaseClosed);return}n.open().catch(F)}n._state.dbReadyPromise.then(r,i)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,i=t.level,a=t.name;a&&this.unuse({stack:n,name:a});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:i==null?10:i,name:a}),o.sort(function(u,s){return u.level-s.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,i=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(a){return i?a.create!==i:r?a.name!==r:!1})),this},e.prototype.open=function(){var t=this;return Be(we,function(){return Ro(t)})},e.prototype._close=function(){var t=this._state,n=ze.indexOf(this);if(n>=0&&ze.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}t.isBeingOpened||(t.dbReadyPromise=new O(function(r){t.dbReadyResolve=r}),t.openCanceller=new O(function(r,i){t.cancelOpen=i}))},e.prototype.close=function(t){var n=t===void 0?{disableAutoOpen:!0}:t,r=n.disableAutoOpen,i=this._state;r?(i.isBeingOpened&&i.cancelOpen(new P.DatabaseClosed),this._close(),i.autoOpen=!1,i.dbOpenError=new P.DatabaseClosed):(this._close(),i.autoOpen=this._options.autoOpen||i.isBeingOpened,i.openComplete=!1,i.dbOpenError=null)},e.prototype.delete=function(t){var n=this;t===void 0&&(t={disableAutoOpen:!0});var r=arguments.length>0&&typeof arguments[0]!="object",i=this._state;return new O(function(a,o){var u=function(){n.close(t);var s=n._deps.indexedDB.deleteDatabase(n.name);s.onsuccess=N(function(){Oo(n._deps,n.name),a()}),s.onerror=ce(o),s.onblocked=n._fireOnBlocked};if(r)throw new P.InvalidArgument("Invalid closeOptions argument to db.delete()");i.isBeingOpened?i.dbReadyPromise.then(u):u()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return z(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var t=So.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var i=this,a=R.trans;(!a||a.db!==this||t.indexOf("!")!==-1)&&(a=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var u,s;try{if(s=n.map(function(f){var l=f instanceof i.Table?f.name:f;if(typeof l!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return l}),t=="r"||t===rn)u=rn;else if(t=="rw"||t==an)u=an;else throw new P.InvalidArgument("Invalid transaction mode: "+t);if(a){if(a.mode===rn&&u===an)if(o)a=null;else throw new P.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a&&s.forEach(function(f){if(a&&a.storeNames.indexOf(f)===-1)if(o)a=null;else throw new P.SubTransaction("Table "+f+" not included in parent transaction.")}),o&&a&&!a.active&&(a=null)}}catch(f){return a?a._promise(null,function(l,h){h(f)}):U(f)}var c=Li.bind(null,this,u,s,a,r);return a?a._promise(u,c,"lock"):R.trans?Be(R.transless,function(){return i._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!Y(this._allTables,t))throw new P.InvalidTable("Table ".concat(t," does not exist"));return this._allTables[t]},e}(),Vo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",zo=function(){function e(t){this._subscribe=t}return e.prototype.subscribe=function(t,n,r){return this._subscribe(!t||typeof t=="function"?{next:t,error:n,complete:r}:t)},e.prototype[Vo]=function(){return this},e}(),zt;try{zt={indexedDB:H.indexedDB||H.mozIndexedDB||H.webkitIndexedDB||H.msIndexedDB,IDBKeyRange:H.IDBKeyRange||H.webkitIDBKeyRange}}catch{zt={indexedDB:null,IDBKeyRange:null}}function Ho(e){var t=!1,n,r=new zo(function(i){var a=Yn(e);function o(m){var g=Ze();try{a&&tt();var b=xe(e,m);return a&&(b=b.finally(Oe)),b}finally{g&&et()}}var u=!1,s,c={},f={},l={get closed(){return u},unsubscribe:function(){u||(u=!0,s&&s.abort(),h&&Re.storagemutated.unsubscribe(v))}};i.start&&i.start(l);var h=!1,_=function(){return nn(y)};function d(){return cr(f,c)}var v=function(m){Jt(c,m),d()&&_()},y=function(){if(!(u||!zt.indexedDB)){c={};var m={};s&&s.abort(),s=new AbortController;var g={subscr:m,signal:s.signal,requery:_,querier:e,trans:null},b=o(g);Promise.resolve(b).then(function(w){t=!0,n=w,!(u||g.signal.aborted)&&(c={},f=m,!ba(f)&&!h&&(Re(gt,v),h=!0),nn(function(){return!u&&i.next&&i.next(w)}))},function(w){t=!1,["DatabaseClosedError","AbortError"].includes(w==null?void 0:w.name)||u||nn(function(){u||i.error&&i.error(w)})})}};return setTimeout(_,0),l});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var Te=Ge;We(Te,B(B({},Gt),{delete:function(e){var t=new Te(e,{addons:[]});return t.delete()},exists:function(e){return new Te(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return Eo(Te.dependencies).then(e)}catch{return U(new P.MissingAPI)}},defineClass:function(){function e(t){te(this,t)}return e},ignoreTransaction:function(e){return R.trans?Be(R.transless,e):e()},vip:$n,async:function(e){return function(){try{var t=zn(e.apply(this,arguments));return!t||typeof t.then!="function"?O.resolve(t):t}catch(n){return U(n)}}},spawn:function(e,t,n){try{var r=zn(e.apply(n,t||[]));return!r||typeof r.then!="function"?O.resolve(r):r}catch(i){return U(i)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(e,t){var n=O.resolve(typeof e=="function"?Te.ignoreTransaction(e):e).timeout(t||6e4);return R.trans?R.trans.waitFor(n):n},Promise:O,debug:{get:function(){return le},set:function(e){Ai(e)}},derive:Je,extend:te,props:We,override:mi,Events:yt,on:Re,liveQuery:Ho,extendObservabilitySet:Jt,getByKeyPath:de,setByKeyPath:ee,delByKeyPath:ya,shallowClone:bi,deepClone:Ee,getObjectDiff:fr,cmp:M,asap:gi,minKey:Fn,addons:[],connections:ze,errnames:Jn,dependencies:zt,cache:ke,semVer:Pr,version:Pr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})}));Te.maxKey=dt(Te.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Re(gt,function(e){if(!be){var t;t=new CustomEvent(Nn,{detail:e}),be=!0,dispatchEvent(t),be=!1}}),addEventListener(Nn,function(e){var t=e.detail;be||dr(t)}));function dr(e){var t=be;try{be=!0,Re.storagemutated.fire(e),lr(e,!0)}finally{be=t}}var be=!1,ge,Hn=function(){};typeof BroadcastChannel<"u"&&(Hn=function(){ge=new BroadcastChannel(Nn),ge.onmessage=function(e){return e.data&&dr(e.data)}},Hn(),typeof ge.unref=="function"&&ge.unref(),Re(gt,function(e){be||ge.postMessage(e)}));typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Ge.disableBfCache&&e.persisted){le&&console.debug("Dexie: handling persisted pagehide"),ge==null||ge.close();for(var t=0,n=ze;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!Ge.disableBfCache&&e.persisted&&(le&&console.debug("Dexie: handling persisted pageshow"),Hn(),dr({all:new G(-1/0,[[]])}))}));O.rejectionMapper=Aa;Ai(le);const qi=!/test|debug|dev|localhost|127\.0\.0\.1/i.test(location.href),js=24*3600*1e3,Wo=3*1e3,Us=9999,$s=30,qs=qi?"iconlake-1":"iconlake-testnet-1",Go="DROP",Vs="udrop",Yo="LAKE",zs="ulake",Hs=1e4,Ws=6e5,Gs={COVER:"cover",ICON:"icon",THEME:"theme",AVATAR:"avatar"},Xo=[/^\/manage\/icons\/[^\/]+(\/use)?/i],$r={SVG:1,IMG:2},Ys={[$r.SVG]:"svg",[$r.IMG]:"img"},qr={DEFAULT:0,TIDY:1},Xs={[qr.DEFAULT]:"default",[qr.TIDY]:"tidy"},Js=20*1024*1024,Qs=qi?"https://iconlake.online":window.location.origin,Jo={".svg":!0},Zs=[{name:"iconfont",code:"iconfont",url:"https://www.iconfont.cn/",active:!0},{name:"\u82B1\u74E3",code:"huaban",url:"https://huaban.com/",active:!0},{name:"\u7AD9\u9177",code:"zcool",url:"https://www.zcool.com.cn/",active:!0},{name:"\u6D82\u9E26\u738B\u56FD",code:"gracg",url:"https://www.gracg.com/",active:!0},{name:"X",code:"x",url:"https://x.com/"},{name:"Pinterest",code:"pinterest",url:"https://www.pinterest.com/"},{name:"Instagram",code:"instagram",url:"https://www.instagram.com/"},{name:"Pixiv",code:"pixiv",url:"https://www.pixiv.net/"}],ec="https://dfs.iconlake.com/";var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nc(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Vi={exports:{}},pr={exports:{}},zi=function(t,n){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(n,i)}},Zo=zi,vr=Object.prototype.toString,yr=function(e){return function(t){var n=vr.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function Fe(e){return e=e.toLowerCase(),function(n){return yr(n)===e}}function mr(e){return Array.isArray(e)}function Ht(e){return typeof e>"u"}function eu(e){return e!==null&&!Ht(e)&&e.constructor!==null&&!Ht(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Hi=Fe("ArrayBuffer");function tu(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Hi(e.buffer),t}function nu(e){return typeof e=="string"}function ru(e){return typeof e=="number"}function Wi(e){return e!==null&&typeof e=="object"}function It(e){if(yr(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var iu=Fe("Date"),au=Fe("File"),ou=Fe("Blob"),uu=Fe("FileList");function gr(e){return vr.call(e)==="[object Function]"}function su(e){return Wi(e)&&gr(e.pipe)}function cu(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||vr.call(e)===t||gr(e.toString)&&e.toString()===t)}var lu=Fe("URLSearchParams");function fu(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function hu(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function br(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),mr(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function Wn(){var e={};function t(i,a){It(e[a])&&It(i)?e[a]=Wn(e[a],i):It(i)?e[a]=Wn({},i):mr(i)?e[a]=i.slice():e[a]=i}for(var n=0,r=arguments.length;n<r;n++)br(arguments[n],t);return e}function du(e,t,n){return br(t,function(i,a){n&&typeof i=="function"?e[a]=Zo(i,n):e[a]=i}),e}function pu(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function vu(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)}function yu(e,t,n){var r,i,a,o={};t=t||{};do{for(r=Object.getOwnPropertyNames(e),i=r.length;i-- >0;)a=r[i],o[a]||(t[a]=e[a],o[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t}function mu(e,t,n){e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return r!==-1&&r===n}function gu(e){if(!e)return null;var t=e.length;if(Ht(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n}var bu=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),W={isArray:mr,isArrayBuffer:Hi,isBuffer:eu,isFormData:cu,isArrayBufferView:tu,isString:nu,isNumber:ru,isObject:Wi,isPlainObject:It,isUndefined:Ht,isDate:iu,isFile:au,isBlob:ou,isFunction:gr,isStream:su,isURLSearchParams:lu,isStandardBrowserEnv:hu,forEach:br,merge:Wn,extend:du,trim:fu,stripBOM:pu,inherits:vu,toFlatObject:yu,kindOf:yr,kindOfTest:Fe,endsWith:mu,toArray:gu,isTypedArray:bu,isFileList:uu},je=W;function Vr(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Gi=function(t,n,r){if(!n)return t;var i;if(r)i=r(n);else if(je.isURLSearchParams(n))i=n.toString();else{var a=[];je.forEach(n,function(s,c){s===null||typeof s>"u"||(je.isArray(s)?c=c+"[]":s=[s],je.forEach(s,function(l){je.isDate(l)?l=l.toISOString():je.isObject(l)&&(l=JSON.stringify(l)),a.push(Vr(c)+"="+Vr(l))}))}),i=a.join("&")}if(i){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},wu=W;function Qt(){this.handlers=[]}Qt.prototype.use=function(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Qt.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Qt.prototype.forEach=function(t){wu.forEach(this.handlers,function(r){r!==null&&t(r)})};var _u=Qt,Eu=W,xu=function(t,n){Eu.forEach(t,function(i,a){a!==n&&a.toUpperCase()===n.toUpperCase()&&(t[n]=i,delete t[a])})},Yi=W;function Ye(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Yi.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Xi=Ye.prototype,Ji={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Ji[e]={value:e}});Object.defineProperties(Ye,Ji);Object.defineProperty(Xi,"isAxiosError",{value:!0});Ye.from=function(e,t,n,r,i,a){var o=Object.create(Xi);return Yi.toFlatObject(e,o,function(s){return s!==Error.prototype}),Ye.call(o,e.message,t,n,r,i),o.name=e.name,a&&Object.assign(o,a),o};var nt=Ye,Qi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oe=W;function Ou(e,t){t=t||new FormData;var n=[];function r(a){return a===null?"":oe.isDate(a)?a.toISOString():oe.isArrayBuffer(a)||oe.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):ca.from(a):a}function i(a,o){if(oe.isPlainObject(a)||oe.isArray(a)){if(n.indexOf(a)!==-1)throw Error("Circular reference detected in "+o);n.push(a),oe.forEach(a,function(s,c){if(!oe.isUndefined(s)){var f=o?o+"."+c:c,l;if(s&&!o&&typeof s=="object"){if(oe.endsWith(c,"{}"))s=JSON.stringify(s);else if(oe.endsWith(c,"[]")&&(l=oe.toArray(s))){l.forEach(function(h){!oe.isUndefined(h)&&t.append(f,r(h))});return}}i(s,f)}}),n.pop()}else t.append(o,r(a))}return i(e),t}var Zi=Ou,dn,zr;function Au(){if(zr)return dn;zr=1;var e=nt;return dn=function(n,r,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?n(i):r(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},dn}var pn,Hr;function Ru(){if(Hr)return pn;Hr=1;var e=W;return pn=e.isStandardBrowserEnv()?function(){return{write:function(r,i,a,o,u,s){var c=[];c.push(r+"="+encodeURIComponent(i)),e.isNumber(a)&&c.push("expires="+new Date(a).toGMTString()),e.isString(o)&&c.push("path="+o),e.isString(u)&&c.push("domain="+u),s===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),pn}var Su=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},Tu=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},Cu=Su,Pu=Tu,ea=function(t,n){return t&&!Cu(n)?Pu(t,n):n},vn,Wr;function Du(){if(Wr)return vn;Wr=1;var e=W,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return vn=function(r){var i={},a,o,u;return r&&e.forEach(r.split(`
`),function(c){if(u=c.indexOf(":"),a=e.trim(c.substr(0,u)).toLowerCase(),o=e.trim(c.substr(u+1)),a){if(i[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([o]):i[a]=i[a]?i[a]+", "+o:o}}),i},vn}var yn,Gr;function ku(){if(Gr)return yn;Gr=1;var e=W;return yn=e.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function a(o){var u=o;return n&&(r.setAttribute("href",u),u=r.href),r.setAttribute("href",u),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=a(window.location.href),function(u){var s=e.isString(u)?a(u):u;return s.protocol===i.protocol&&s.host===i.host}}():function(){return function(){return!0}}(),yn}var mn,Yr;function Zt(){if(Yr)return mn;Yr=1;var e=nt,t=W;function n(r){e.call(this,r==null?"canceled":r,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(n,e,{__CANCEL__:!0}),mn=n,mn}var gn,Xr;function Iu(){return Xr||(Xr=1,gn=function(t){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return n&&n[1]||""}),gn}var bn,Jr;function Qr(){if(Jr)return bn;Jr=1;var e=W,t=Au(),n=Ru(),r=Gi,i=ea,a=Du(),o=ku(),u=Qi,s=nt,c=Zt(),f=Iu();return bn=function(h){return new Promise(function(d,v){var y=h.data,m=h.headers,g=h.responseType,b;function w(){h.cancelToken&&h.cancelToken.unsubscribe(b),h.signal&&h.signal.removeEventListener("abort",b)}e.isFormData(y)&&e.isStandardBrowserEnv()&&delete m["Content-Type"];var p=new XMLHttpRequest;if(h.auth){var E=h.auth.username||"",x=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";m.Authorization="Basic "+btoa(E+":"+x)}var A=i(h.baseURL,h.url);p.open(h.method.toUpperCase(),r(A,h.params,h.paramsSerializer),!0),p.timeout=h.timeout;function D(){if(!!p){var k="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null,T=!g||g==="text"||g==="json"?p.responseText:p.response,K={data:T,status:p.status,statusText:p.statusText,headers:k,config:h,request:p};t(function(j){d(j),w()},function(j){v(j),w()},K),p=null}}if("onloadend"in p?p.onloadend=D:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(D)},p.onabort=function(){!p||(v(new s("Request aborted",s.ECONNABORTED,h,p)),p=null)},p.onerror=function(){v(new s("Network Error",s.ERR_NETWORK,h,p,p)),p=null},p.ontimeout=function(){var T=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",K=h.transitional||u;h.timeoutErrorMessage&&(T=h.timeoutErrorMessage),v(new s(T,K.clarifyTimeoutError?s.ETIMEDOUT:s.ECONNABORTED,h,p)),p=null},e.isStandardBrowserEnv()){var I=(h.withCredentials||o(A))&&h.xsrfCookieName?n.read(h.xsrfCookieName):void 0;I&&(m[h.xsrfHeaderName]=I)}"setRequestHeader"in p&&e.forEach(m,function(T,K){typeof y>"u"&&K.toLowerCase()==="content-type"?delete m[K]:p.setRequestHeader(K,T)}),e.isUndefined(h.withCredentials)||(p.withCredentials=!!h.withCredentials),g&&g!=="json"&&(p.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&p.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(b=function(k){!p||(v(!k||k&&k.type?new c:k),p.abort(),p=null)},h.cancelToken&&h.cancelToken.subscribe(b),h.signal&&(h.signal.aborted?b():h.signal.addEventListener("abort",b))),y||(y=null);var S=f(A);if(S&&["http","https","file"].indexOf(S)===-1){v(new s("Unsupported protocol "+S+":",s.ERR_BAD_REQUEST,h));return}p.send(y)})},bn}var wn,Zr;function Bu(){return Zr||(Zr=1,wn=null),wn}var q=W,ei=xu,ti=nt,Ku=Qi,Mu=Zi,Fu={"Content-Type":"application/x-www-form-urlencoded"};function ni(e,t){!q.isUndefined(e)&&q.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function Nu(){var e;return(typeof XMLHttpRequest<"u"||typeof xr<"u"&&Object.prototype.toString.call(xr)==="[object process]")&&(e=Qr()),e}function Lu(e,t,n){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}var en={transitional:Ku,adapter:Nu(),transformRequest:[function(t,n){if(ei(n,"Accept"),ei(n,"Content-Type"),q.isFormData(t)||q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return ni(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r=q.isObject(t),i=n&&n["Content-Type"],a;if((a=q.isFileList(t))||r&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return Mu(a?{"files[]":t}:t,o&&new o)}else if(r||i==="application/json")return ni(n,"application/json"),Lu(t);return t}],transformResponse:[function(t){var n=this.transitional||en.transitional,r=n&&n.silentJSONParsing,i=n&&n.forcedJSONParsing,a=!r&&this.responseType==="json";if(a||i&&q.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(a)throw o.name==="SyntaxError"?ti.from(o,ti.ERR_BAD_RESPONSE,this,null,this.response):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bu()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};q.forEach(["delete","get","head"],function(t){en.headers[t]={}});q.forEach(["post","put","patch"],function(t){en.headers[t]=q.merge(Fu)});var wr=en,ju=W,Uu=wr,$u=function(t,n,r){var i=this||Uu;return ju.forEach(r,function(o){t=o.call(i,t,n)}),t},_n,ri;function ta(){return ri||(ri=1,_n=function(t){return!!(t&&t.__CANCEL__)}),_n}var ii=W,En=$u,qu=ta(),Vu=wr,zu=Zt();function xn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new zu}var Hu=function(t){xn(t),t.headers=t.headers||{},t.data=En.call(t,t.data,t.headers,t.transformRequest),t.headers=ii.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ii.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var n=t.adapter||Vu.adapter;return n(t).then(function(i){return xn(t),i.data=En.call(t,i.data,i.headers,t.transformResponse),i},function(i){return qu(i)||(xn(t),i&&i.response&&(i.response.data=En.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},Q=W,na=function(t,n){n=n||{};var r={};function i(f,l){return Q.isPlainObject(f)&&Q.isPlainObject(l)?Q.merge(f,l):Q.isPlainObject(l)?Q.merge({},l):Q.isArray(l)?l.slice():l}function a(f){if(Q.isUndefined(n[f])){if(!Q.isUndefined(t[f]))return i(void 0,t[f])}else return i(t[f],n[f])}function o(f){if(!Q.isUndefined(n[f]))return i(void 0,n[f])}function u(f){if(Q.isUndefined(n[f])){if(!Q.isUndefined(t[f]))return i(void 0,t[f])}else return i(void 0,n[f])}function s(f){if(f in n)return i(t[f],n[f]);if(f in t)return i(void 0,t[f])}var c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return Q.forEach(Object.keys(t).concat(Object.keys(n)),function(l){var h=c[l]||a,_=h(l);Q.isUndefined(_)&&h!==s||(r[l]=_)}),r},On,ai;function ra(){return ai||(ai=1,On={version:"0.27.2"}),On}var Wu=ra().version,me=nt,_r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){_r[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var oi={};_r.transitional=function(t,n,r){function i(a,o){return"[Axios v"+Wu+"] Transitional option '"+a+"'"+o+(r?". "+r:"")}return function(a,o,u){if(t===!1)throw new me(i(o," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!oi[o]&&(oi[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,o,u):!0}};function Gu(e,t,n){if(typeof e!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var u=e[a],s=u===void 0||o(u,a,e);if(s!==!0)throw new me("option "+a+" must be "+s,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+a,me.ERR_BAD_OPTION)}}var Yu={assertOptions:Gu,validators:_r},ia=W,Xu=Gi,ui=_u,si=Hu,tn=na,Ju=ea,aa=Yu,Ue=aa.validators;function Xe(e){this.defaults=e,this.interceptors={request:new ui,response:new ui}}Xe.prototype.request=function(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=tn(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&aa.assertOptions(r,{silentJSONParsing:Ue.transitional(Ue.boolean),forcedJSONParsing:Ue.transitional(Ue.boolean),clarifyTimeoutError:Ue.transitional(Ue.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(a=a&&_.synchronous,i.unshift(_.fulfilled,_.rejected))});var o=[];this.interceptors.response.forEach(function(_){o.push(_.fulfilled,_.rejected)});var u;if(!a){var s=[si,void 0];for(Array.prototype.unshift.apply(s,i),s=s.concat(o),u=Promise.resolve(n);s.length;)u=u.then(s.shift(),s.shift());return u}for(var c=n;i.length;){var f=i.shift(),l=i.shift();try{c=f(c)}catch(h){l(h);break}}try{u=si(c)}catch(h){return Promise.reject(h)}for(;o.length;)u=u.then(o.shift(),o.shift());return u};Xe.prototype.getUri=function(t){t=tn(this.defaults,t);var n=Ju(t.baseURL,t.url);return Xu(n,t.params,t.paramsSerializer)};ia.forEach(["delete","get","head","options"],function(t){Xe.prototype[t]=function(n,r){return this.request(tn(r||{},{method:t,url:n,data:(r||{}).data}))}});ia.forEach(["post","put","patch"],function(t){function n(r){return function(a,o,u){return this.request(tn(u||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Xe.prototype[t]=n(),Xe.prototype[t+"Form"]=n(!0)});var Qu=Xe,An,ci;function Zu(){if(ci)return An;ci=1;var e=Zt();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var i=this;this.promise.then(function(a){if(!!i._listeners){var o,u=i._listeners.length;for(o=0;o<u;o++)i._listeners[o](a);i._listeners=null}}),this.promise.then=function(a){var o,u=new Promise(function(s){i.subscribe(s),o=s}).then(a);return u.cancel=function(){i.unsubscribe(o)},u},n(function(o){i.reason||(i.reason=new e(o),r(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},t.prototype.unsubscribe=function(r){if(!!this._listeners){var i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var r,i=new t(function(o){r=o});return{token:i,cancel:r}},An=t,An}var Rn,li;function es(){return li||(li=1,Rn=function(t){return function(r){return t.apply(null,r)}}),Rn}var Sn,fi;function ts(){if(fi)return Sn;fi=1;var e=W;return Sn=function(n){return e.isObject(n)&&n.isAxiosError===!0},Sn}var hi=W,ns=zi,Bt=Qu,rs=na,is=wr;function oa(e){var t=new Bt(e),n=ns(Bt.prototype.request,t);return hi.extend(n,Bt.prototype,t),hi.extend(n,t),n.create=function(i){return oa(rs(e,i))},n}var X=oa(is);X.Axios=Bt;X.CanceledError=Zt();X.CancelToken=Zu();X.isCancel=ta();X.VERSION=ra().version;X.toFormData=Zi;X.AxiosError=nt;X.Cancel=X.CanceledError;X.all=function(t){return Promise.all(t)};X.spread=es();X.isAxiosError=ts();pr.exports=X;pr.exports.default=X;(function(e){e.exports=pr.exports})(Vi);const as=Qo(Vi.exports),Rt=[],ct=document.createElement("div");ct.className="toast-container";document.body.appendChild(ct);function Me(e,t){if(Rt.length>0){const i=Rt[Rt.length-1];if(i.params.msg===e&&i.params.type===t&&Date.now()-i.createTime<500)return}const n=document.createElement("div");n.className=`toast ${t||""}`,n.innerText=e,ct.appendChild(n);let r=setTimeout(()=>{ct.removeChild(n)},3e3);n.addEventListener("mouseenter",()=>{clearTimeout(r)}),n.addEventListener("mouseleave",()=>{r=setTimeout(()=>{ct.removeChild(n)},500)}),Rt.push({params:{msg:e,type:t},timer:r,dom:n,createTime:Date.now()})}Me.success=e=>{Me(e,"success")};Me.error=e=>{Me(e,"error")};Me.warn=e=>{Me(e,"warn")};function rc(e,t,n){const r=document.createElement("div");r.className="confirm-container";const i=document.createElement("div");i.className="confirm",r.appendChild(i);const a=document.createElement("div");a.className="confirm-body",typeof e=="string"?a.innerText=e:a.appendChild(e),i.appendChild(a);const o=document.createElement("div");o.className="confirm-footer";const u=document.createElement("div");u.className="confirm-btn confirm-ok",u.innerText=(n==null?void 0:n.confirmText)||Or[Ar].confirm;const s=document.createElement("div");s.className="confirm-btn confirm-cancel",s.innerText=(n==null?void 0:n.cancelText)||Or[Ar].cancel,o.appendChild(s),o.appendChild(u),i.appendChild(o),u.addEventListener("click",c=>{document.body.removeChild(r),t(c)}),s.addEventListener("click",c=>{document.body.removeChild(r),typeof(n==null?void 0:n.cancel)=="function"&&n.cancel(c)}),document.body.appendChild(r)}function ic(e){typeof navigator.clipboard.writeText=="function"&&navigator.clipboard.writeText(e)}function ac(e){const t=new Date(e);return`${t.getFullYear()}-${t.getMonth()+1}-${t.getDate()}`}function oc(e,t=!0){return`${(e/1e6).toFixed(6)}${t?Yo:""}`}function uc(e,t=!0){return`${(e/1e4).toFixed(4)}${t?Go:""}`}function os(e=location.pathname){return Xo.some(t=>t.test(e))}function us(e){const t=e.lastIndexOf(".");return t===-1?"":e.substring(t).toLowerCase()}function sc(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=n,r.readAsText(e)})}function cc(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{r.result?t(new Blob([r.result],{type:e.type})):n()},r.onerror=n,r.readAsArrayBuffer(e)})}function lc(e,t){var i,a;const n=us(e);if(Jo[n])return e;let r="";return e.indexOf("?")===-1?r+="?":r+="&",r+=`imageMogr2/thumbnail/${(i=t.maxWidth)!=null?i:""}x${(a=t.maxHeight)!=null?a:""}>/ignore-error/1`,`${e}${r}`}function Gn(e){const t={tokenExpired:!0,userNotLogin:!0};if(e.error in t){os()||Ms().finally(()=>{location.href=`/login?referer=${encodeURIComponent(location.href.replace(location.origin,""))}`});return}typeof e.error=="string"&&Me.error(la.global.t(e.error))}const ss=as.create({headers:{"X-Requested-With":"XMLHttpRequest"}});function $(e){return new Promise((t,n)=>{ss(e).then(r=>{cs(r,t,n)}).catch(r=>{Gn(r),n(r)})})}function cs(e,t,n){e.status===200&&!e.data.error?t(e.data):e.data.error?(Gn(e.data),n(e.data)):(Gn(e),n(e))}var ls=(e=>(e.Gitee="gitee",e.Github="github",e.Code="code",e.Blockchain="blockchain",e.Google="google",e.WebAuthn="webAuthn",e.Mail="mail",e))(ls||{});const J="/api/user/";let di="";const Er={get info(){return qe.user.enable({executor:fs})},get clearCache(){return ds},get userId(){return hs},get loginParams(){return qe.user.enable({executor:ms})},get getTheme(){return qe.user.enable({executor:xs})},get getUsage(){return qe.user.enable({executor:As})},get getTickets(){return qe.user.enable({executor:Ps})},unbind:gs,regenAccessKey:bs,logout:ps,loginByBlockchain:vs,loginByCode:ys,editInfo:ws,uploadFile:_s,editTheme:Es,generateTheme:Os,webAuthnRegister:Rs,mailLogin:Ss,sendMail:Ts,claimTicket:Cs,likeTicket:Ds,setTicketPasskey:ks};async function fs(){const e=await $({url:"/info",baseURL:J});return typeof e.tokenExpire=="string"&&(e.tokenExpire=new Date(e.tokenExpire)),e}async function hs(){return await Er.info().onUpdate(async e=>{di=e._id}),di}async function ds(){const e=await Er.userId();await qe.user.clear(e)}function ps(){return $({url:"/logout",baseURL:J})}function vs(e){return $({url:"/api/oauth/blockchain",method:"POST",data:e})}function ys(e){return $({url:"/api/oauth/code",method:"GET",params:{id:e.code}})}function ms(){return $({url:"/api/login/params",method:"GET"})}function gs(e){return $({url:"/setting/unbind",method:"GET",params:{type:e},baseURL:J})}function bs(){return $({method:"GET",url:"/setting/regenAccessKey",baseURL:J})}function ws(e){return $({method:"POST",url:"/info/edit",baseURL:J,data:e})}function _s(e){return $({method:"POST",url:"/file/upload",baseURL:J,headers:{"Content-Type":typeof e.data=="string"?"text/plain; charset=utf-8":"application/octet-stream"},params:{_id:e._id,dir:e.dir},data:e.data,timeout:1e3*60*3})}function Es(e){return $({method:"POST",url:"/theme/edit",baseURL:J,data:e})}function xs(e){return $({method:"GET",url:"/theme/info",baseURL:J,data:e})}function Os({prompt:e}){return $({method:"POST",url:"/theme/generate",baseURL:J,data:{prompt:e}})}function As(){return $({method:"GET",url:"/info/usage",baseURL:J})}function Rs(e){return $({method:"POST",url:"/webAuthn/register",baseURL:"/api/oauth",data:e})}function Ss(e){return $({method:"POST",url:"/mail/login",baseURL:"/api/oauth",data:e})}function Ts(e){return $({method:"POST",url:"/mail/send",baseURL:"/api/oauth",data:e})}function Cs(e){return $({method:"POST",url:"/ticket/claim",baseURL:J,data:e})}function Ps(){return $({method:"GET",url:"/ticket/list",baseURL:J})}function Ds(e){return $({method:"POST",url:"/ticket/like",baseURL:J,data:e})}function ks(e){return $({method:"POST",url:"/ticket/setPasskey",baseURL:J,data:e})}Ge.debug=!1;const re=new Ge("iconlake");re.version(1).stores({cache:"&id,userId,value,createTime"});re.open().catch(console.error);async function Is(e){const t=await Er.userId();re.cache.add({...e,createTime:Date.now(),userId:t})}async function Bs(e){if(!re.isOpen()&&(await re.open(),!re.isOpen()))throw new Error("db not open");const t=await re.cache.where(e).first().catch(()=>null);if(!t)throw new Error("cache not found");return t}async function Ks(e,t){await re.cache.update(e,{value:t,createTime:Date.now()})}function pi({module:e,code:t,maxAge:n=Wo,executor:r}){return(...i)=>({onUpdate:async a=>{const o=JSON.stringify(i);let u=typeof t=="function"?t(i):t;u||(u=r.name);const s=`${e}::${u}::${o}`;try{const{value:c,createTime:f}=await Bs({id:s});Date.now()-f>n&&r(...i).then(l=>{Ks(s,l),a(l)}),await a(c)}catch{const f=await r(...i);Is({id:s,value:f}),await a(f)}}})}const qe={project:{enable:e=>pi({...e,module:"project"})},user:{enable:e=>pi({...e,module:"user"}),clear:Fs}};async function Ms(){re.isOpen()&&await re.delete()}async function Fs(e){const t=await re.cache.where("userId").equals(e).toArray();await re.cache.bulkDelete(t.map(n=>n.id))}export{qs as C,ec as D,qi as I,zs as L,Ws as M,Qs as O,$r as P,Zs as S,$s as T,Js as U,lc as a,Vs as b,qe as c,tc as d,us as e,Gs as f,nc as g,rc as h,ic as i,qr as j,cc as k,Ys as l,Xs as m,Us as n,js as o,ac as p,$ as q,sc as r,Hs as s,Me as t,Er as u,oc as v,Yo as w,uc as x,Go as y,ls as z};
