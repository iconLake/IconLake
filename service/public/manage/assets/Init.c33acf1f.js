import{d as X,u as ee,E as re,m as P,p as te,o as ne,c as x,a as W,b as M,v as V,t as y,e as F,f as I,l as oe,F as ae,ah as ce,i as ie,k as U,_ as fe}from"./index.c3ac6b9b.js";import{H as ue}from"./Header.5323aa62.js";import{U as se}from"./User.3e9238d3.js";import{L as le}from"./Loading.7dd0339b.js";import{d as h,t as de,L as he}from"./cache.05004cf3.js";import{i as ve,h as me,j as ge}from"./blockchain.62e14144.js";import{u as _e}from"./user.237cd0b6.js";import"./@iconlake/client.0b258216.js";import"./index.9c1809da.js";var q={},w={};Object.defineProperty(w,"__esModule",{value:!0});w.fromAscii=w.toAscii=void 0;function ye(e){const r=t=>t.split("").map(n=>{const o=n.charCodeAt(0);if(o<32||o>126)throw new Error("Cannot encode character that is out of printable ASCII range: "+o);return o});return Uint8Array.from(r(e))}w.toAscii=ye;function be(e){return(t=>t.map(n=>{if(n<32||n>126)throw new Error("Cannot decode character that is out of printable ASCII range: "+n);return String.fromCharCode(n)}))(Array.from(e)).join("")}w.fromAscii=be;var B={},L={};L.byteLength=we;L.toByteArray=Oe;L.fromByteArray=Fe;var v=[],d=[],pe=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var b=0,Ae=T.length;b<Ae;++b)v[b]=T[b],d[T.charCodeAt(b)]=b;d["-".charCodeAt(0)]=62;d["_".charCodeAt(0)]=63;function Z(e){var r=e.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=e.indexOf("=");t===-1&&(t=r);var n=t===r?0:4-t%4;return[t,n]}function we(e){var r=Z(e),t=r[0],n=r[1];return(t+n)*3/4-n}function Be(e,r,t){return(r+t)*3/4-t}function Oe(e){var r,t=Z(e),n=t[0],o=t[1],a=new pe(Be(e,n,o)),c=0,f=o>0?n-4:n,i;for(i=0;i<f;i+=4)r=d[e.charCodeAt(i)]<<18|d[e.charCodeAt(i+1)]<<12|d[e.charCodeAt(i+2)]<<6|d[e.charCodeAt(i+3)],a[c++]=r>>16&255,a[c++]=r>>8&255,a[c++]=r&255;return o===2&&(r=d[e.charCodeAt(i)]<<2|d[e.charCodeAt(i+1)]>>4,a[c++]=r&255),o===1&&(r=d[e.charCodeAt(i)]<<10|d[e.charCodeAt(i+1)]<<4|d[e.charCodeAt(i+2)]>>2,a[c++]=r>>8&255,a[c++]=r&255),a}function je(e){return v[e>>18&63]+v[e>>12&63]+v[e>>6&63]+v[e&63]}function Ce(e,r,t){for(var n,o=[],a=r;a<t;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),o.push(je(n));return o.join("")}function Fe(e){for(var r,t=e.length,n=t%3,o=[],a=16383,c=0,f=t-n;c<f;c+=a)o.push(Ce(e,c,c+a>f?f:c+a));return n===1?(r=e[t-1],o.push(v[r>>2]+v[r<<4&63]+"==")):n===2&&(r=(e[t-2]<<8)+e[t-1],o.push(v[r>>10]+v[r>>4&63]+v[r<<2&63]+"=")),o.join("")}var Ue=h&&h.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Pe=h&&h.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),xe=h&&h.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&Ue(r,e,t);return Pe(r,e),r};Object.defineProperty(B,"__esModule",{value:!0});B.fromBase64=B.toBase64=void 0;const K=xe(L);function Me(e){return K.fromByteArray(e)}B.toBase64=Me;function Ee(e){if(!e.match(/^[a-zA-Z0-9+/]*={0,2}$/))throw new Error("Invalid base64 string format");return K.toByteArray(e)}B.fromBase64=Ee;var _={},H="qpzry9x8gf2tvdw0s3jn54khce6mua7l",$={};for(var E=0;E<H.length;E++){var N=H.charAt(E);if($[N]!==void 0)throw new TypeError(N+" is ambiguous");$[N]=E}function A(e){var r=e>>25;return(e&33554431)<<5^-(r>>0&1)&996825010^-(r>>1&1)&642813549^-(r>>2&1)&513874426^-(r>>3&1)&1027748829^-(r>>4&1)&705979059}function G(e){for(var r=1,t=0;t<e.length;++t){var n=e.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+e+")";r=A(r)^n>>5}for(r=A(r),t=0;t<e.length;++t){var o=e.charCodeAt(t);r=A(r)^o&31}return r}function He(e,r,t){if(t=t||90,e.length+7+r.length>t)throw new TypeError("Exceeds length limit");e=e.toLowerCase();var n=G(e);if(typeof n=="string")throw new Error(n);for(var o=e+"1",a=0;a<r.length;++a){var c=r[a];if(c>>5!==0)throw new Error("Non 5-bit word");n=A(n)^c,o+=H.charAt(c)}for(a=0;a<6;++a)n=A(n);for(n^=1,a=0;a<6;++a){var f=n>>(5-a)*5&31;o+=H.charAt(f)}return o}function J(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";var t=e.toLowerCase(),n=e.toUpperCase();if(e!==t&&e!==n)return"Mixed-case string "+e;e=t;var o=e.lastIndexOf("1");if(o===-1)return"No separator character for "+e;if(o===0)return"Missing prefix for "+e;var a=e.slice(0,o),c=e.slice(o+1);if(c.length<6)return"Data too short";var f=G(a);if(typeof f=="string")return f;for(var i=[],s=0;s<c.length;++s){var g=c.charAt(s),m=$[g];if(m===void 0)return"Unknown character "+g;f=A(f)^m,!(s+6>=c.length)&&i.push(m)}return f!==1?"Invalid checksum for "+e:{prefix:a,words:i}}function De(){var e=J.apply(null,arguments);if(typeof e=="object")return e}function Le(e){var r=J.apply(null,arguments);if(typeof r=="object")return r;throw new Error(r)}function S(e,r,t,n){for(var o=0,a=0,c=(1<<t)-1,f=[],i=0;i<e.length;++i)for(o=o<<r|e[i],a+=r;a>=t;)a-=t,f.push(o>>a&c);if(n)a>0&&f.push(o<<t-a&c);else{if(a>=r)return"Excess padding";if(o<<t-a&c)return"Non-zero padding"}return f}function Se(e){var r=S(e,8,5,!0);if(Array.isArray(r))return r}function Re(e){var r=S(e,8,5,!0);if(Array.isArray(r))return r;throw new Error(r)}function Te(e){var r=S(e,5,8,!1);if(Array.isArray(r))return r}function Ne(e){var r=S(e,5,8,!1);if(Array.isArray(r))return r;throw new Error(r)}var $e={decodeUnsafe:De,decode:Le,encode:He,toWordsUnsafe:Se,toWords:Re,fromWordsUnsafe:Te,fromWords:Ne},ke=h&&h.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),ze=h&&h.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),We=h&&h.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var t in e)t!=="default"&&Object.prototype.hasOwnProperty.call(e,t)&&ke(r,e,t);return ze(r,e),r};Object.defineProperty(_,"__esModule",{value:!0});_.normalizeBech32=_.fromBech32=_.toBech32=void 0;const D=We($e);function Y(e,r,t){return D.encode(e,D.toWords(r),t)}_.toBech32=Y;function Q(e,r=1/0){const t=D.decode(e,r);return{prefix:t.prefix,data:new Uint8Array(D.fromWords(t.words))}}_.fromBech32=Q;function Ve(e){const{prefix:r,data:t}=Q(e);return Y(r,t)}_.normalizeBech32=Ve;var O={};Object.defineProperty(O,"__esModule",{value:!0});O.fromHex=O.toHex=void 0;function Ie(e){let r="";for(const t of e)r+=("0"+t.toString(16)).slice(-2);return r}O.toHex=Ie;function qe(e){if(e.length%2!==0)throw new Error("hex string length must be a multiple of 2");const r=new Uint8Array(e.length/2);for(let t=0;t<r.length;t++){const n=2*t,o=e.slice(n,n+2);if(!o.match(/[0-9a-f]{2}/i))throw new Error("hex string contains invalid characters");r[t]=parseInt(o,16)}return r}O.fromHex=qe;var j={};Object.defineProperty(j,"__esModule",{value:!0});j.toRfc3339=j.fromRfc3339=void 0;const Ze=/^(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(\.\d{1,9})?((?:[+-]\d{2}:\d{2})|Z)$/;function p(e,r=2){return e.toString().padStart(r,"0")}function Ke(e){const r=Ze.exec(e);if(!r)throw new Error("Date string is not in RFC3339 format");const t=+r[1],n=+r[2],o=+r[3],a=+r[4],c=+r[5],f=+r[6],i=r[7]?Math.floor(+r[7]*1e3):0;let s,g,m;r[8]==="Z"?(s=1,g=0,m=0):(s=r[8].substring(0,1)==="-"?-1:1,g=+r[8].substring(1,3),m=+r[8].substring(4,6));const R=s*(g*60+m)*60,l=Date.UTC(t,n-1,o,a,c,f,i)-R*1e3;return new Date(l)}j.fromRfc3339=Ke;function Ge(e){const r=e.getUTCFullYear(),t=p(e.getUTCMonth()+1),n=p(e.getUTCDate()),o=p(e.getUTCHours()),a=p(e.getUTCMinutes()),c=p(e.getUTCSeconds()),f=p(e.getUTCMilliseconds(),3);return`${r}-${t}-${n}T${o}:${a}:${c}.${f}Z`}j.toRfc3339=Ge;var C={};Object.defineProperty(C,"__esModule",{value:!0});C.fromUtf8=C.toUtf8=void 0;function Je(e){return new TextEncoder().encode(e)}C.toUtf8=Je;function Ye(e,r=!1){const t=!r;return new TextDecoder("utf-8",{fatal:t}).decode(e)}C.fromUtf8=Ye;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toUtf8=e.fromUtf8=e.toRfc3339=e.fromRfc3339=e.toHex=e.fromHex=e.toBech32=e.normalizeBech32=e.fromBech32=e.toBase64=e.fromBase64=e.toAscii=e.fromAscii=void 0;var r=w;Object.defineProperty(e,"fromAscii",{enumerable:!0,get:function(){return r.fromAscii}}),Object.defineProperty(e,"toAscii",{enumerable:!0,get:function(){return r.toAscii}});var t=B;Object.defineProperty(e,"fromBase64",{enumerable:!0,get:function(){return t.fromBase64}}),Object.defineProperty(e,"toBase64",{enumerable:!0,get:function(){return t.toBase64}});var n=_;Object.defineProperty(e,"fromBech32",{enumerable:!0,get:function(){return n.fromBech32}}),Object.defineProperty(e,"normalizeBech32",{enumerable:!0,get:function(){return n.normalizeBech32}}),Object.defineProperty(e,"toBech32",{enumerable:!0,get:function(){return n.toBech32}});var o=O;Object.defineProperty(e,"fromHex",{enumerable:!0,get:function(){return o.fromHex}}),Object.defineProperty(e,"toHex",{enumerable:!0,get:function(){return o.toHex}});var a=j;Object.defineProperty(e,"fromRfc3339",{enumerable:!0,get:function(){return a.fromRfc3339}}),Object.defineProperty(e,"toRfc3339",{enumerable:!0,get:function(){return a.toRfc3339}});var c=C;Object.defineProperty(e,"fromUtf8",{enumerable:!0,get:function(){return c.fromUtf8}}),Object.defineProperty(e,"toUtf8",{enumerable:!0,get:function(){return c.toUtf8}})})(q);const Qe={class:"flex center column page"},Xe={key:0},er={class:"addr"},rr={key:1},tr=["disabled"],nr={key:1},or={class:"help"},ar="url(/imgs/init-drop-bg.png)",cr=X({__name:"Init",setup(e){ce(l=>({"3a544e40":ar}));const{t:r}=ee(),t=ie(),{userInfo:n,getUserInfo:o}=_e(),a=re(),c=P(0),f=P(0),i=P(""),s=P(!1),g=te(()=>{var l;return f.value>0?r("initedAndNoNeedAgain"):!((l=n==null?void 0:n.blockchain)!=null&&l.id)||c.value<=0?r("notEnoughLAKE"):""});async function m(){var l,u;s.value||!((l=n.blockchain)!=null&&l.id)||(s.value=!0,await ve((u=n==null?void 0:n.blockchain)==null?void 0:u.id,i.value,!1).then(()=>{de(r("alreadyMinting")),f.value=Date.now()}).finally(()=>{s.value=!1}))}async function R(){var l;await o(),(l=n.blockchain)!=null&&l.id&&await Promise.all([me(n.blockchain.id,he).then(u=>{u!=null&&u.amount&&(c.value=+(u==null?void 0:u.amount))}),i.value?ge(i.value).then(u=>{u!=null&&u.last_mint_time&&(f.value=+u.last_mint_time)}):!1])}return ne(()=>{if(typeof a.query.addr=="string")try{q.fromBech32(a.query.addr),i.value=a.query.addr}catch{}R().finally(()=>{t.end()})}),(l,u)=>{var k,z;return U(),x(ae,null,[W(ue,{back:!0}),W(se),M("div",Qe,[i.value.length>8?(U(),x("div",Xe,[V(y(F(r)("enableDROPMintingForSomeone1")),1),M("span",er,y(i.value),1),V(y(F(r)("enableDROPMintingForSomeone2")),1)])):I("",!0),i.value===""?(U(),x("div",rr,y(F(r)("invalidAddress")),1)):I("",!0),M("button",{class:"btn init",disabled:!((z=(k=F(n))==null?void 0:k.blockchain)!=null&&z.id)||c.value<=0||f.value>0||i.value==="",onClick:m},[s.value?(U(),oe(le,{key:0})):(U(),x("span",nr,y(F(r)("start")),1))],8,tr),M("div",or,y(g.value),1)])],64)}}});const gr=fe(cr,[["__scopeId","data-v-0c99f822"]]);export{gr as default};
