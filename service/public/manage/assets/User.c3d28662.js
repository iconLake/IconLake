import{d as E,h as U,x as m,e as g,i as j,o as p,j as f,l as e,m as a,t as l,y as q,q as L,s as z}from"./vendor.feadc916.js";import{q as x}from"./request.a1189ab9.js";import{_ as B}from"./plugin-vue_export-helper.5a098b48.js";const h="/api/user/";let t;async function C(s){return t&&!s||(t=await x({url:"/info",baseURL:h}),typeof t.tokenExpire=="string"&&(t.tokenExpire=new Date(t.tokenExpire))),t}function D(){return x({url:"/logout",baseURL:h})}const S=s=>(L("data-v-242a6ba8"),s=s(),z(),s),T={key:0,class:"avatar img"},M=["src","alt"],P={key:1,class:"avatar bg-main text flex center"},V={href:"https://support.qq.com/product/370032",target:"_blank",class:"item flex"},$=S(()=>a("i",{class:"iconfont icon-out"},null,-1)),A=E({setup(s){const{t:v}=U();let r=m(g.get("locale")||"zh-cn");const _={"en-us":{label:"\u8BED\u8A00",value:"\u4E2D\u6587"},"zh-cn":{label:"Language",value:"English"}}[r.value];let u=m(!1),c=0;const o=j({});async function b(){Object.assign(o,await C())}b();function k(n){r.value=n,g.set("locale",n,{expires:100*360}),window.location.reload()}function y(){k(r.value==="en-us"?"zh-cn":"en-us")}function d(n){c&&clearTimeout(c),n?u.value=n:c=setTimeout(()=>{u.value=!1},100)}async function w(){await D(),location.href="/login"}return(n,i)=>(p(),f("div",{class:"user",onMouseenter:i[0]||(i[0]=I=>d(!0)),onMouseleave:i[1]||(i[1]=I=>d(!1))},[e(o).avatar?(p(),f("div",T,[a("img",{src:e(o).avatar,alt:e(o).name},null,8,M)])):(p(),f("div",P,[a("span",null,l(e(o).name?e(o).name[0]:"U"),1)])),a("div",{class:q(["pop",{active:e(u)}])},[a("div",{class:"item flex",onClick:y},[a("span",null,l(e(_).label),1),a("span",null,l(e(_).value),1)]),a("a",V,l(e(v)("feedback")),1),a("div",{class:"item flex",onClick:w},[a("span",null,l(e(v)("logout")),1),$])],2)],32))}});var F=B(A,[["__scopeId","data-v-242a6ba8"]]);export{F as U};
