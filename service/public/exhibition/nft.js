var __awaiter=this&&this.__awaiter||function(e,c,d,r){return new(d=d||Promise)(function(t,n){function i(e){try{a(r.next(e))}catch(e){n(e)}}function o(e){try{a(r.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?t(e.value):((n=e.value)instanceof d?n:new d(function(e){e(n)})).then(i,o)}a((r=r.apply(e,c||[])).next())})};__awaiter(void 0,void 0,void 0,function*(){var n=window.iconlakeAPI;if(n){var t=document.querySelector("#iconlake-root");if(t){var i=yield n.nft.getInfo();if(i){if(null!=(o=i.data)&&o.author){var o=yield fetch(`/api/blacklist/verify/nft?address=${i.data.author}&projectId=${n.class.id}&nftId=`+n.nft.id).then(e=>e.json()).catch(console.error);if(o.error)return;if(o.block.nftId){if(!(yield fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>e.isAdmin)))return t.innerHTML='<h1 class="blocked">This NFT has been blocked.</h1>',void(n.loading.isShow=!1);i=document.createElement("div");let e="NFT";o.block.address?e="作者":o.block.projectId&&(e="项目"),i.innerText="封:"+e,i.className="blocked-admin",document.body.appendChild(i)}}let e="/themes/default/nft.js";(!n.isProduction||n.isProduction&&location.origin!==n.domain.master)&&null!=(o=yield fetch("/api/project/theme/info?id="+n.class.id).then(e=>e.json()))&&o.nft&&(e=/^https?:\/\//i.test(o.nft)?o.nft:n.config.cdn+"/"+o.nft);i=new URL(location.href),i=(i.searchParams.has("theme")&&(o=i.searchParams.get("theme"))&&(e=o),document.createElement("script"));i.src=e,i.type="module",i.crossOrigin="anonymous",document.body.appendChild(i)}else t.innerHTML='<h1 class="blocked">This NFT have not been published to the chain.</h1>',n.loading.isShow=!1}else console.error("rootDom is not defined")}else console.error("window.iconlakeAPI is not defined")}),"#admin"===location.hash&&fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>{e.isAdmin&&((e=document.createElement("script")).src="/admin/blacklist/init.js",document.body.appendChild(e))});