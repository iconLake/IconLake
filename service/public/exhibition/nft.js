var __awaiter=this&&this.__awaiter||function(e,c,d,r){return new(d=d||Promise)(function(t,n){function i(e){try{a(r.next(e))}catch(e){n(e)}}function o(e){try{a(r.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?t(e.value):((n=e.value)instanceof d?n:new d(function(e){e(n)})).then(i,o)}a((r=r.apply(e,c||[])).next())})};__awaiter(void 0,void 0,void 0,function*(){var n=window.iconlakeAPI;if(n){var t=document.querySelector("iconlake-nft");if(t){var i=yield n.nft.getInfo();if(i){i=yield fetch(`/api/blacklist/verify/nft?address=${i.data.author}&projectId=${n.project.id}&nftId=`+n.nft.id).then(e=>e.json()).catch(console.error);if(!i.error){if(i.block.nftId){if(!(yield fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>e.isAdmin)))return t.innerHTML='<h1 class="blocked">This NFT has been blocked.</h1>',void(n.loading.isShow=!1);var o=document.createElement("div");let e="NFT";i.block.address?e="作者":i.block.projectId&&(e="项目"),o.innerText="封:"+e,o.className="blocked-admin",document.body.appendChild(o)}let e="/themes/default/components/nft-b31a686d.js";i=new URL(location.href);i.searchParams.has("theme")&&(o=i.searchParams.get("theme"))&&(e=o),import(e).then(e=>{customElements.define("iconlake-nft",e.default)})}}else t.innerHTML='<h1 class="blocked">This NFT have not been published to the chain.</h1>',n.loading.isShow=!1}}else console.error("window.iconlakeAPI is not defined")}),"#admin"===location.hash&&fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>{e.isAdmin&&((e=document.createElement("script")).src="/admin/blacklist/init.js",document.body.appendChild(e))});