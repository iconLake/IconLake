var __awaiter=this&&this.__awaiter||function(e,r,s,c){return new(s=s||Promise)(function(n,t){function i(e){try{o(c.next(e))}catch(e){t(e)}}function a(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,a)}o((c=c.apply(e,r||[])).next())})};(a=>{var e=!/test|localhost|127\.0\.0\.1/i.test(location.href);const o=e?"https://lcd.iconlake.com":"https://lcd.testnet.iconlake.com";var t=e?"https://cdn.iconlake.com":"https://iconlake-sh-test-1304929357.cos.ap-shanghai.myqcloud.com",n={master:e?"https://iconlake.com":location.origin,online:e?"https://iconlake.online":location.origin},i=document.querySelector(".loading");if(!i)return;const r={isShow:!1,dom:i},s=(Object.defineProperties(r,{isShow:{get(){var e;return null==(e=r.dom)?void 0:e.classList.contains("show")},set(e){e?null!=(e=r.dom)&&e.classList.add("show"):null!=(e=r.dom)&&e.classList.remove("show")}}}),t=>{if(t instanceof Object){if(t instanceof Array)return t.map(s);const n={};return Object.keys(t).forEach(e=>{"_"!==e[0]&&(n[e.replace(/_([a-z])/g,e=>e[1].toUpperCase())]=s(t[e]))}),n}return t}),c={data:new Map},l={id:""},d=(Object.defineProperties(l,{id:{get(){var e=location.pathname.match(/^\/exhibition\/([^/?#]+).*/);return null==e?void 0:e[1]},set(){console.log("id is readonly")}}}),l.getNfts=a=>__awaiter(void 0,void 0,void 0,function*(){var e=null!=a?a:l.id,t="class:getNfts:"+e,n=c.data.get(t);if(n)return n;let i=yield fetch(o+"/iconlake/icon/nfts?class_id="+e).then(e=>e.json()).then(s);return i&&0!=+(null==(n=i.pagination)?void 0:n.total)||(n=f.getSearchParams(),i=yield fetch("/api/exhibition/nftList/"+e+(n?"?"+n:"")).then(e=>e.json())),c.data.set(t,i),i}),l.getInfo=a=>__awaiter(void 0,void 0,void 0,function*(){var e=null!=a?a:l.id,t="class:getInfo:"+e,n=c.data.get(t);if(n)return n;let i=yield fetch(o+"/iconlake/icon/class?id="+e).then(e=>e.json()).then(s);return null!==i&&void 0!==i&&i.class||(i={class:yield fetch("/api/exhibition/classInfo/"+e).then(e=>e.json())}),c.data.set(t,i.class),i.class}),{id:""}),h=(Object.defineProperties(d,{id:{get(){var e=location.pathname.match(/^\/exhibition\/[^/?#]+\/([^/?#]+).*/);return null==e?void 0:e[1]},set(){console.log("id is readonly")}}}),d.getInfo=a=>__awaiter(void 0,void 0,void 0,function*(){var e=null!=a?a:d.id,t="nft:getInfo:"+e,n=c.data.get(t);if(n)return n;let i=yield fetch(o+`/iconlake/icon/nft?class_id=${l.id}&id=`+e).then(e=>e.json()).then(s);return null!==i&&void 0!==i&&i.nft||(n=f.getSearchParams(),i={nft:yield fetch(`/api/exhibition/nftInfo/${l.id}/`+e+(n?"?"+n:"")).then(e=>e.json())}),c.data.set(t,i.nft),i.nft}),{address:""});Object.defineProperties(h,{address:{get(){var e=location.pathname.match(/^\/exhibition\/creator\/([^/?#]+).*/);return null==e?void 0:e[1]},set(){console.log("address is readonly")}}});i={config:{alignment:"center",background_color:"#B581A3",color:"social",enabled:!0,font_size:12,has_spacing:!0,is_ssb:!(h.getInfo=a=>__awaiter(void 0,void 0,void 0,function*(){var e=null!=a?a:h.address,t="creator:getInfo:"+e,n=c.data.get(t);if(n)return n;let i=yield fetch(o+"/iconlake/icon/creator/"+e).then(e=>e.json()).then(e=>{if(e.error)throw new Error(e.error);return s(e)});return null!==i&&void 0!==i&&i.creator||(i={creator:yield fetch("/api/exhibition/creatorInfo/"+e).then(e=>e.json())}),c.data.set(t,i.creator),i.creator})),labels:"none",language:"en",min_count:0,networks:["sharethis"],num_networks:5,num_ssb_networks:3,padding:10,radius:10,show_total:!1,size:32,size_label:"small",spacing:8,text_color:"#fff",use_native_counts:!0},load(n,i){return __awaiter(this,void 0,void 0,function*(){yield new Promise(e=>{if(a.__sharethis__)return e();const t=setInterval(()=>{if(a.__sharethis__)return clearInterval(t),e()},50)});var e,t={};i&&(i.nftId?(e=yield d.getInfo(i.nftId),t.url=a.location.href,t.image=e.uri,t.title=e.data.name,t.description=e.data.description):i.classId?(e=yield l.getInfo(i.classId),t.url=window.location.href,t.image=e.uri,t.title=e.name,t.description=e.description):i.creator&&(e=yield h.getInfo(i.creator),t.url=window.location.href,t.image=e.avatar,t.title=e.name,t.description=e.description)),a.__sharethis__.load("inline-share-buttons",Object.assign(Object.assign({container:n},this.config),t))})}};const f={url:a.location.href,ticket:"",passkey:"",getParams(){var e=new URL(f.url);return{ticket:e.searchParams.get("ticket")||void 0,passkey:e.searchParams.get("passkey")||void 0}},getSearchParams(){var e=f.getParams(),t={};return e.ticket&&(t.ticket=e.ticket),e.passkey&&(t.passkey=e.passkey),new URLSearchParams(t).toString()}};Object.assign(f,f.getParams()),a.iconlakeAPI={version:1,isProduction:e,config:{lcd:o,cdn:t},domain:n,loading:r,class:l,nft:d,creator:h,share:i,auth:f,verifyHash:function(e,t){return e&&t?fetch(e,{mode:"cors",headers:{"Cache-Control":"no-cache"}}).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>__awaiter(this,void 0,void 0,function*(){return(yield import("/libs/js-sha256/sha256.min.js")).default.sha256(e)===t?1:0})).catch(e=>(console.error(e),-1)):Promise.resolve(0)}}})(window);