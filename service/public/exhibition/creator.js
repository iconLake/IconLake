var __awaiter=this&&this.__awaiter||function(e,a,c,s){return new(c=c||Promise)(function(o,n){function i(e){try{r(s.next(e))}catch(e){n(e)}}function t(e){try{r(s.throw(e))}catch(e){n(e)}}function r(e){var n;e.done?o(e.value):((n=e.value)instanceof c?n:new c(function(e){e(n)})).then(i,t)}r((s=s.apply(e,a||[])).next())})};__awaiter(void 0,void 0,void 0,function*(){var n=window.iconlakeAPI;if(n){var o=document.querySelector("#iconlake-root");if(o){var i=yield n.creator.getInfo();if(i){var t=yield fetch("/api/blacklist/verify/address?address="+i.address).then(e=>e.json()).catch(console.error);if(!t.error){if(t.block.creator){if(!(yield fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>e.isAdmin)))return o.innerHTML='<h1 class="blocked">This Creator has been blocked.</h1>',void(n.loading.isShow=!1);t=document.createElement("div");t.innerText="封:作者",t.className="blocked-admin",document.body.appendChild(t)}let e="/themes/default/creator.js";(!n.isProduction||n.isProduction&&location.origin!==n.domain.master)&&null!=(t=yield fetch("/api/user/theme/info?address="+i.address).then(e=>e.json()))&&t.creator&&(e=/^https?:\/\//i.test(t.creator)?t.creator:n.config.cdn+"/"+t.creator);i=new URL(location.href),i=(i.searchParams.has("theme")&&(t=i.searchParams.get("theme"))&&(e=t),document.createElement("script"));i.src=e,i.type="module",i.crossOrigin="anonymous",document.body.appendChild(i)}}else o.innerHTML='<h1 class="blocked">This Creator have not been published to the chain.</h1>',n.loading.isShow=!1}else console.error("rootDom is not defined")}else console.error("window.iconlakeAPI is not defined")}),"#admin"===location.hash&&fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>{e.isAdmin&&((e=document.createElement("script")).src="/admin/blacklist/init.js",document.body.appendChild(e))});