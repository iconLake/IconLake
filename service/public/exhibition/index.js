var __awaiter=this&&this.__awaiter||function(e,c,s,r){return new(s=s||Promise)(function(i,n){function o(e){try{a(r.next(e))}catch(e){n(e)}}function t(e){try{a(r.throw(e))}catch(e){n(e)}}function a(e){var n;e.done?i(e.value):((n=e.value)instanceof s?n:new s(function(e){e(n)})).then(o,t)}a((r=r.apply(e,c||[])).next())})};__awaiter(void 0,void 0,void 0,function*(){var n=window.iconlakeAPI;if(n){var i=document.querySelector("#iconlake-root");if(i){var o=yield n.class.getInfo();if(o){o=yield fetch(`/api/blacklist/verify/project?address=${o.data.author}&projectId=`+n.class.id).then(e=>e.json()).catch(console.error);if(!o.error){if(o.block.projectId){if(!(yield fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>e.isAdmin)))return i.innerHTML='<h1 class="blocked">This project has been blocked.</h1>',void(n.loading.isShow=!1);var t=document.createElement("div");let e="项目";o.block.address&&(e="作者"),t.innerText="封:"+e,t.className="blocked-admin",document.body.appendChild(t)}let e="/themes/default/exhibition.js";(!n.isProduction||n.isProduction&&location.origin!==n.domain.master)&&null!=(o=yield fetch("/api/project/theme/info?id="+n.class.id).then(e=>e.json()))&&o.class&&(e=/^https?:\/\//i.test(o.class)?o.class:n.config.cdn+"/"+o.class);t=new URL(location.href),t=(t.searchParams.has("theme")&&(o=t.searchParams.get("theme"))&&(e=o),document.createElement("script"));t.src=e,t.type="module",t.crossOrigin="anonymous",document.body.appendChild(t)}}else i.innerHTML='<h1 class="blocked">This project has not been published to the chain.</h1>',n.loading.isShow=!1}else console.error("rootDom is not defined")}else console.error("window.iconlakeAPI is not defined")}),"#admin"===location.hash&&fetch("/api/admin/info/verify").then(e=>e.json()).then(e=>{e.isAdmin&&((e=document.createElement("script")).src="/admin/blacklist/init.js",document.body.appendChild(e))});